<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>重新開始吧，關於前端職涯（短文）</title>
    <link href="/post/restart-frontend.html"/>
    <url>/post/restart-frontend.html</url>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>這陣子一直覺得自己在前端工程師的職涯中，有一種「腳踩不到地」的感覺，這種感覺滿悶跟令人低潮的。</p><p>昨天拿起了紙筆，開始探索過去的前端工作經歷，有曾經待過的公司，或者是面試覺得喜歡但後來沒有選擇的公司，在這覆盤的過程中，找出自己的一些問題點。</p><h2 id="問題點是什麼？"><a href="#問題點是什麼？" class="headerlink" title="問題點是什麼？"></a>問題點是什麼？</h2><h3 id="眼高手低"><a href="#眼高手低" class="headerlink" title="眼高手低"></a>眼高手低</h3><p>曾經有一段時間，因為在工作經歷、面試中嚐到了甜頭，而有了這樣的壞習慣。它讓我在那段時間沒有看到自己的不足，也錯過了一個不錯的工作機會。</p><h3 id="急躁、急於求成"><a href="#急躁、急於求成" class="headerlink" title="急躁、急於求成"></a>急躁、急於求成</h3><p>這也不僅僅是前端生涯就有的問題。過去沒有好好靜下來探索過，自己真正想要的是什麼；而把焦點放在要達成某個成就，而最後我了解到，這求的是一場空，因為不是自己冷靜下來觀察跟探索的，而只是社會要我們成為的樣子。</p><p>然後也造成了不務實、沒有好好接地，忽略了技能都是需要時間堆疊的。</p><h3 id="害怕與逃避"><a href="#害怕與逃避" class="headerlink" title="害怕與逃避"></a>害怕與逃避</h3><p>常常守在舊有的模式，不自覺會逃避新的機會，而最可怕的是會默默被包裝在思考中，變成乍看之下有所思考，或者這個決定是要捍衛自己信念，但這些只是為了逃避而創造的假象（故事）。</p><h2 id="結論與方向"><a href="#結論與方向" class="headerlink" title="結論與方向"></a>結論與方向</h2><p>透過這覆盤讓我了解到，原來夠痛的話，也會催化自己的不同視角，直接去深入面對那些黑暗面。而在這時代的快速變遷，以及一些自己可能的偏好中，我無法知道會待在這個領域多久，畢竟人生是無常的；而現在能做的，就是重新面對過去所留下的，以及更有覺知的去看待這些黑暗面。</p><p>把這些整理出來後，心情也放鬆下來了。配合自己最重視的五個價值觀，我也擬定出接下來要專注的幾個面項，因為時間跟身體能量是有限的，然後觀察看看距離 2025 剩不到 100 天，可以有什麼變化跟累積。</p><p>Photo by <a href="https://unsplash.com/@hayabussa?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">mahamudul hasan</a> on <a href="https://unsplash.com/photos/silhouette-of-person-standing-on-seashore-during-sunset-tn-UC3YKRzU?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Unsplash</a></p>]]></content>
    
    
    <categories>
      
      <category>生活</category>
      
    </categories>
    
    
    <tags>
      
      <tag>生活</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>mongoDB 資料庫（資料表操作）</title>
    <link href="/post/mongod-mongosh.html"/>
    <url>/post/mongod-mongosh.html</url>
    
    <content type="html"><![CDATA[<!-- :::tip關於 **mongoDB 資料庫與資料表操作**用自己的口語再次筆記練習::: --><h2 id="前置操作"><a href="#前置操作" class="headerlink" title="前置操作"></a>前置操作</h2><p>（需要先安裝 MongoDB、Mongo Shell、MongoDB Compass）</p><h3 id="使用-mongod-開啟伺服器應用（資料庫）"><a href="#使用-mongod-開啟伺服器應用（資料庫）" class="headerlink" title="使用 mongod 開啟伺服器應用（資料庫）"></a>使用 mongod 開啟伺服器應用（資料庫）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">mongod --dbpath `db資料夾路徑` --logpath `<span class="hljs-built_in">log</span>資料夾路徑`<br></code></pre></td></tr></table></figure><h3 id="mongosh：造訪資料庫，並做一些應用（新增、刪除、修改…）"><a href="#mongosh：造訪資料庫，並做一些應用（新增、刪除、修改…）" class="headerlink" title="mongosh：造訪資料庫，並做一些應用（新增、刪除、修改…）"></a>mongosh：造訪資料庫，並做一些應用（新增、刪除、修改…）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">mongosh<br></code></pre></td></tr></table></figure><p><img src="https://i.imgur.com/VZGNBQh.png" alt="mongosh"></p><h3 id="show-dbs：呈現現有資料庫（一開始預設是三個）"><a href="#show-dbs：呈現現有資料庫（一開始預設是三個）" class="headerlink" title="show dbs：呈現現有資料庫（一開始預設是三個）"></a>show dbs：呈現現有資料庫（一開始預設是三個）</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tsx">show dbs<br></code></pre></td></tr></table></figure><h3 id="use-來使用某個資料庫"><a href="#use-來使用某個資料庫" class="headerlink" title="use 來使用某個資料庫"></a>use 來使用某個資料庫</h3><p>如果沒有這個資料庫，則會直接幫我們新增，並移動到這個資料庫</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">use `資料庫名稱`<br>// use hotel<br></code></pre></td></tr></table></figure><hr><h2 id="資料表操作單筆、多筆資料-document"><a href="#資料表操作單筆、多筆資料-document" class="headerlink" title="資料表操作單筆、多筆資料(document)"></a>資料表操作單筆、多筆資料(document)</h2><h3 id="insert-相關"><a href="#insert-相關" class="headerlink" title="insert 相關"></a>insert 相關</h3><p><strong>insertOne 新增單筆資料：</strong> 在 posts 這個資料表中，新增一筆資料(document)，這筆資料有七個欄位（如果一開始沒有 posts 這個資料表，則會在輸入指令時幫我們新增）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">db.posts.insertOne(&#123;<br>    <span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;Billy&quot;</span>,<br>    <span class="hljs-string">&quot;image&quot;</span>:<span class="hljs-string">&quot;https://dummyimage.com/248x100.png/dddddd/000000&quot;</span>,<br>    <span class="hljs-string">&quot;content&quot;</span>:<span class="hljs-string">&quot;我是貼文內容，20240304新增&quot;</span>,<br>    <span class="hljs-string">&quot;likes&quot;</span>:50,<br>    <span class="hljs-string">&quot;comment&quot;</span>:30,<br>    <span class="hljs-string">&quot;type&quot;</span>:<span class="hljs-string">&quot;group&quot;</span>,<br>    <span class="hljs-string">&quot;tags&quot;</span>:[<span class="hljs-string">&quot;心情&quot;</span>,<span class="hljs-string">&quot;教育&quot;</span>],<br>&#125;)<br></code></pre></td></tr></table></figure><p><strong>insertMany 新增多筆資料：</strong>在 posts 這個資料表中，新增兩筆資料(document)，每筆資料有七個欄位</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs bash">db.posts.insertMany([<br>&#123;<br>    <span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;Billy2&quot;</span>,<br>    <span class="hljs-string">&quot;image&quot;</span>:<span class="hljs-string">&quot;https://dummyimage.com/248x100.png/dddddd/000000&quot;</span>,<br>    <span class="hljs-string">&quot;content&quot;</span>:<span class="hljs-string">&quot;我是貼文內容222，20240304新增&quot;</span>,<br>    <span class="hljs-string">&quot;likes&quot;</span>:80,<br>    <span class="hljs-string">&quot;comment&quot;</span>:60,<br>    <span class="hljs-string">&quot;type&quot;</span>:<span class="hljs-string">&quot;group&quot;</span>,<br>    <span class="hljs-string">&quot;tags&quot;</span>:[<span class="hljs-string">&quot;心情&quot;</span>,<span class="hljs-string">&quot;教育&quot;</span>],<br>  &#125;,<br>    &#123;<br>    <span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;Billy3&quot;</span>,<br>    <span class="hljs-string">&quot;image&quot;</span>:<span class="hljs-string">&quot;https://dummyimage.com/248x100.png/dddddd/000000&quot;</span>,<br>    <span class="hljs-string">&quot;content&quot;</span>:<span class="hljs-string">&quot;我是貼文內容333，20240304新增&quot;</span>,<br>    <span class="hljs-string">&quot;likes&quot;</span>:500,<br>    <span class="hljs-string">&quot;comment&quot;</span>:300,<br>    <span class="hljs-string">&quot;type&quot;</span>:<span class="hljs-string">&quot;group&quot;</span>,<br>    <span class="hljs-string">&quot;tags&quot;</span>:[<span class="hljs-string">&quot;心情&quot;</span>,<span class="hljs-string">&quot;教育&quot;</span>],<br>  &#125;<br>])<br></code></pre></td></tr></table></figure><h3 id="Update-相關"><a href="#Update-相關" class="headerlink" title="Update 相關"></a>Update 相關</h3><p><strong>updateOne 修改單筆資料：</strong>在 posts 這個資料表中，根據條件篩選出的一筆資料(document)，進行欄位的調整。下方範例是將篩選出的資料(document)，將 content 欄位的值調整為”測試資料”</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">db.posts.updateOne(<br>    &#123;<span class="hljs-string">&quot;_id&quot;</span>:ObjectId(<span class="hljs-string">&quot;xxxxxxxxx...&quot;</span>)&#125;, // 條件篩選<br>    &#123;<span class="hljs-variable">$set</span>:&#123;<span class="hljs-string">&quot;content&quot;</span>:<span class="hljs-string">&quot;測試資料&quot;</span>&#125;&#125;<br>)<br></code></pre></td></tr></table></figure><p>篩選一筆特定資料(document)，將裡頭的 tags 陣列欄位，再新增一個新 tags</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">db.posts.updateOne(<br>&#123;<span class="hljs-string">&quot;_id&quot;</span>:ObjectId(<span class="hljs-string">&quot;65dcxxx...&quot;</span>)&#125;<br>,&#123;<span class="hljs-variable">$push</span>:&#123;tags:<span class="hljs-string">&quot;遊記&quot;</span>&#125;&#125;)<br><br>// 驗證<br>// db.posts.find(&#123;<br>   // <span class="hljs-string">&quot;_id&quot;</span>:ObjectId(<span class="hljs-string">&quot;65dcxxx...&quot;</span>)<br>// &#125;)<br><br></code></pre></td></tr></table></figure><p><strong>updateMany 修改多筆資料：</strong>在 posts 這個資料表中，去篩選出多筆 name 欄位為”abc123”的資料(document)，並將這些資料的 content 欄位都調整成”測試”</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">db.posts.updateMany(<br>  &#123;<span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;abc123&quot;</span>&#125;,<br>  &#123;<span class="hljs-variable">$set</span>:&#123;<span class="hljs-string">&quot;content&quot;</span>:<span class="hljs-string">&quot;測試&quot;</span>&#125;&#125;<br>)<br><br></code></pre></td></tr></table></figure><p>使用 updateMany 來移除欄位，下方範例是將 tags 陣列的”感情” tag 都移除</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">db.posts.updateMany(<br>  &#123; <span class="hljs-string">&quot;tags&quot;</span>: <span class="hljs-string">&quot;感情&quot;</span> &#125;,<br>  &#123; <span class="hljs-variable">$pull</span>: &#123; <span class="hljs-string">&quot;tags&quot;</span>: <span class="hljs-string">&quot;感情&quot;</span> &#125; &#125;<br>)<br><br></code></pre></td></tr></table></figure><h3 id="delete-相關"><a href="#delete-相關" class="headerlink" title="delete 相關"></a>delete 相關</h3><p><strong>deleteOne 刪除單筆資料：</strong>在 posts 這個資料表中，去篩選 id 為 aaa123 的資料(document)，然後將之刪除</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">db.posts.deleteOne(<br>  &#123;<span class="hljs-string">&quot;_id&quot;</span>:ObjectId(<span class="hljs-string">&quot;aaa123&quot;</span>)&#125;<br>)<br><br></code></pre></td></tr></table></figure><p><strong>deleteMany 刪除多筆資料：</strong>將 type: group 這個條件中的多筆資料都刪除</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">db.posts.deleteMany(<br>  &#123;<br>    <span class="hljs-string">&quot;type&quot;</span>:<span class="hljs-string">&quot;group&quot;</span> // 條件<br>  &#125;<br>)<br><br></code></pre></td></tr></table></figure><p>多個條件：將名字為 abc，以及 likes 數量 500(含) 以下都刪除</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">db.posts.deleteMany(<br>  &#123;<br>    <span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;abc&quot;</span>,<br>    <span class="hljs-string">&quot;likes&quot;</span>:&#123;<br>      <span class="hljs-variable">$lte</span>: 500 // <span class="hljs-variable">$lte</span> 表示小於等於<br>    &#125;<br>  &#125;<br>)<br><br></code></pre></td></tr></table></figure><p>不寫任何條件，等同於刪除全部資料</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">db.posts.deleteMany(&#123;&#125;)<br></code></pre></td></tr></table></figure><h3 id="find-相關"><a href="#find-相關" class="headerlink" title="find 相關"></a>find 相關</h3><p>查詢全部 posts 的資料列表(document)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">db.posts.find()<br>db.posts.find().pretty()<br></code></pre></td></tr></table></figure><p>模糊搜尋：name 欄位含有 o 的資料列表</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">db.posts.find(<br>  &#123;<span class="hljs-string">&quot;name&quot;</span>:/o/&#125;<br>)<br><br></code></pre></td></tr></table></figure><p>單個條件：查詢 comments 有大於等於 500 以上的資料列表</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">db.posts.find(<br>  &#123;<br>    <span class="hljs-string">&quot;comments&quot;</span>: &#123;<br>        <span class="hljs-variable">$gte</span>:500<br>    &#125;,<br>  &#125;<br>)<br><br></code></pre></td></tr></table></figure><p>查詢 image 欄位為 null 的資料列表</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">db.posts.find(&#123;<br>  <span class="hljs-string">&quot;image&quot;</span>: null<br>&#125;)<br><br></code></pre></td></tr></table></figure><p>多個條件：name 欄位為 abc123，按讚數大於等於 500、小於等於 1000</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">db.posts.find(<br>  &#123;<br>    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;abc123&quot;</span>,<br>    <span class="hljs-string">&quot;likes&quot;</span>: &#123;<br>        <span class="hljs-variable">$gte</span>:500, // <span class="hljs-variable">$gte</span> 大於等於<br>        <span class="hljs-variable">$lte</span>:1000 // <span class="hljs-variable">$lte</span> 小於等於<br>    &#125;,<br>  &#125;<br>)<br></code></pre></td></tr></table></figure><p>project 保護欄位：查詢 tags 欄位中，有包含到”幹話”的資料列表，然後將 _id 欄位設置隱藏（在有些狀況中，我們不可透露重要資訊在 user）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">db.posts.find(<br>  &#123;<br>    <span class="hljs-string">&quot;tags&quot;</span>: &#123;<br>      <span class="hljs-variable">$in</span>: [<span class="hljs-string">&#x27;幹話&#x27;</span>] // <span class="hljs-variable">$in</span> 表示內容存在某個值<br>    &#125;<br>  &#125;,<br>  &#123;<span class="hljs-string">&quot;_id&quot;</span>: 0&#125; // 將 <span class="hljs-built_in">id</span> 欄位隱藏<br>)<br><br></code></pre></td></tr></table></figure><p>查詢 tags 欄位，有 謎因 或(or) 幹話 的資料列表</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">db.posts.find(<br>  &#123;<br>    <span class="hljs-string">&quot;tags&quot;</span>: &#123;<br>      <span class="hljs-variable">$in</span>: [<span class="hljs-string">&#x27;謎因&#x27;</span>,<span class="hljs-string">&#x27;幹話&#x27;</span>]<br>    &#125;<br>  &#125;<br>)<br><br></code></pre></td></tr></table></figure><p>find 的 $and 與 $or：<br>在 posts 資料表中，找尋 likes 跟(and) comments 欄位都大於等於 1500 以上的資料列表（<a href="https://www.runoob.com/mongodb/mongodb-query.html">參考連結</a>）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">db.posts.find(&#123;<br>  <span class="hljs-variable">$and</span>: [<br>    &#123; <span class="hljs-string">&quot;likes&quot;</span>: &#123; <span class="hljs-variable">$gte</span>: 1500 &#125; &#125;,<br>    &#123; <span class="hljs-string">&quot;comments&quot;</span>: &#123; <span class="hljs-variable">$gte</span>: 1500 &#125; &#125;<br>  ]<br>&#125;)<br><br>//db.posts.find(&#123; 這個範例也可以這樣寫<br>  //<span class="hljs-string">&quot;likes&quot;</span>: &#123; <span class="hljs-variable">$gte</span>: 1500 &#125;,<br>  //<span class="hljs-string">&quot;comments&quot;</span>: &#123; <span class="hljs-variable">$gte</span>: 1500 &#125;<br>//&#125;)<br></code></pre></td></tr></table></figure><p>在 posts 資料表中，找尋 likes 或(or) comments 欄位中，大於等於 1000 以上的資料列表</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">db.posts.find(&#123;<br>  <span class="hljs-variable">$or</span>: [<br>    &#123; <span class="hljs-string">&quot;likes&quot;</span>: &#123; <span class="hljs-variable">$gte</span>: 1000 &#125; &#125;,<br>    &#123; <span class="hljs-string">&quot;comments&quot;</span>: &#123; <span class="hljs-variable">$gte</span>: 1000 &#125; &#125;<br>  ]<br>&#125;)<br><br></code></pre></td></tr></table></figure><p>顯示 posts 資料表的資料筆數（數字）（<a href="https://www.mongodb.com/docs/manual/reference/method/db.collection.countDocuments/">參考連結</a>）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">db.posts.countDocuments()<br></code></pre></td></tr></table></figure><p>查詢 name 欄位為 abc123 的資料列表，而這個排序從新到舊（<a href="https://www.runoob.com/mongodb/mongodb-sort.html">參考連結</a>）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">db.posts.find(<br>  &#123; <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;abc123&quot;</span> &#125; // 查詢條件<br>).<span class="hljs-built_in">sort</span>(<br>  &#123; <span class="hljs-string">&quot;createdAt&quot;</span>: -1 &#125; // 根據 createdAt 欄位進行降序排序 (由新到舊)<br>)<br><br></code></pre></td></tr></table></figure><p>查詢 name 欄位為 abc123 的資料列表，只顯示前 30 筆資料（<a href="https://www.runoob.com/mongodb/mongodb-limit-skip.html">參考連結</a>）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">db.posts.find(<br>  &#123; <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;abc123&quot;</span> &#125; // 查詢條件<br>).<span class="hljs-built_in">limit</span>(30) // 限制返回結果為前 30 筆資料<br><br></code></pre></td></tr></table></figure><p>查詢 name 欄位為 abc123、likes 欄位大於等於 100 的資料列表。而這個資料列表只需顯示前 30 筆，並且對於這資料列表做新到舊的排序</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">db.posts.find(<br>  &#123; // 條件<br>    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;abc123&quot;</span>,<br>    <span class="hljs-string">&quot;likes&quot;</span>: &#123;<br>        <span class="hljs-variable">$gte</span>:100,<br>    &#125;<br>  &#125;<br>).<span class="hljs-built_in">limit</span>(30).<span class="hljs-built_in">sort</span>( &#123;<span class="hljs-string">&quot;createdAt&quot;</span>: -1&#125; ); // 筆數與排序<br><br></code></pre></td></tr></table></figure><p>查詢 comments 超過 100 的資料列表，取得時先跳過前 30 筆資料，再顯示 30 筆資料</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">db.posts.find(<br>  &#123;<br>    <span class="hljs-string">&quot;comments&quot;</span>: &#123;<br>        <span class="hljs-variable">$gt</span>: 100<br>    &#125;<br>  &#125;<br>).skip(30).<span class="hljs-built_in">limit</span>(30); // 要 30 筆，但先跳過 30 筆<br></code></pre></td></tr></table></figure><h3 id="replace-相關"><a href="#replace-相關" class="headerlink" title="replace 相關"></a>replace 相關</h3><p>替換 <strong>replaceOne、replaceMany：</strong>如下範例，透過 id 篩選了一筆要 replace 的資料，這邊會將 name 欄位修改成 yes~。<br>假設這筆資料還有其它欄位的話，在 replace 更新未寫到時，則會視為欄位的刪除，也就是這筆資料會只剩下 id 跟 name 欄位。（replace 這樣的用法也有刪除的功能）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">db.posts.replaceOne(<br>&#123;<span class="hljs-string">&quot;_id&quot;</span>:ObjectId(<span class="hljs-string">&quot;abcxxx&quot;</span>)&#125;,<br>&#123;name:<span class="hljs-string">&quot;yes~&quot;</span>&#125;)<br></code></pre></td></tr></table></figure><p><strong>Comparison Query Operators 表格</strong></p><table><thead><tr><th>$eq</th><th>等於</th></tr></thead><tbody><tr><td>$ne</td><td>不等於</td></tr><tr><td>$gt</td><td>大於</td></tr><tr><td>$lt</td><td>小於</td></tr><tr><td>$gte</td><td>大於等於</td></tr><tr><td>$lte</td><td>小於等於</td></tr><tr><td>$in</td><td>存在某個值</td></tr><tr><td>$nin</td><td>不存在某個值</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>前端</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MongoDB</tag>
      
      <tag>Mongo Shell</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>JavaScript 傳值與傳參考</title>
    <link href="/post/js-value-or-reference.html"/>
    <url>/post/js-value-or-reference.html</url>
    
    <content type="html"><![CDATA[<h2 id="JavaScript-的資料型別"><a href="#JavaScript-的資料型別" class="headerlink" title="JavaScript 的資料型別"></a>JavaScript 的資料型別</h2><p>在討論到傳值(Call by Value)或傳參考(Call by Reference)之前，我們先來了解 JavaScript 的資料型別，它分為「原始型別」跟「物件型別」兩大分類。</p><p>原始型別(純值)：</p><ul><li>Boolean</li><li>String</li><li>Number</li><li>Null</li><li>Undefined</li><li>BigInt</li><li>Symbol</li></ul><p>物件型別：<br>除了以上七種原始型別之外，其他都歸類為物件型別。（所以並沒有陣列型別、函式型別）</p><h2 id="傳值-Call-by-Value-、傳參考-Call-by-Reference"><a href="#傳值-Call-by-Value-、傳參考-Call-by-Reference" class="headerlink" title="傳值(Call by Value)、傳參考 (Call by Reference)"></a>傳值(Call by Value)、傳參考 (Call by Reference)</h2><p>了解到 JavaScript 的資料型別後，若以一般、基本狀況來說，<strong>原始型別的資料依循傳值的特性；而物件型別的資料則依循傳參考的特性</strong>。</p><h3 id="傳值-Call-by-Value"><a href="#傳值-Call-by-Value" class="headerlink" title="傳值(Call by Value)"></a>傳值(Call by Value)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> num1 = <span class="hljs-number">10</span>;<br><span class="hljs-keyword">var</span> num2 = <span class="hljs-number">10</span>;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(num1 === num2); <span class="hljs-comment">// true</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> num1 = <span class="hljs-number">10</span>;<br><span class="hljs-keyword">var</span> num2 = num1;<br>num2 = <span class="hljs-number">100</span>;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(num1 === num2); <span class="hljs-comment">// false</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(num1, num2); <span class="hljs-comment">// 10, 100</span><br></code></pre></td></tr></table></figure><p>如上方兩個範例所示，如果你有一些些 JS 基礎，對於 <code>console.log</code> 的內容應該不會意外，我們以第二個範例作執行流程：</p><ol><li><code>var num1 = 10;</code>，宣告一個 num1 的變數，並指定為 10，這裡會建立一個記憶體(假設為 0x01)來儲存 10 這個值。</li><li><code>var num2 = num1;</code>，宣告一個 num2 的變數，並指定為 num1，這裡的 num2 會建立另一個記憶體(假設為 0x02)，並將 num1 的值(10)複製過來儲存。</li><li><code>num2 = 100;</code> 將 num2 的值改為 100。</li><li><code>console.log(num1 === num2); console.log(num1, num2)</code> num2 的更動並不會影響到 num1，因為他們存在於兩個不同的記憶體位置，num1 的值為 10，而 num2 的值為 100。</li></ol><p><strong>在原始型別的變數赋值和傳遞是以”值”來進行的，值跟值的關係是獨立不連動的。</strong></p><h3 id="傳參考-Call-by-Reference"><a href="#傳參考-Call-by-Reference" class="headerlink" title="傳參考 (Call by Reference)"></a>傳參考 (Call by Reference)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> obj1 = &#123;<br><span class="hljs-attr">num</span>: <span class="hljs-number">10</span>,<br>&#125;;<br><span class="hljs-keyword">var</span> obj2 = &#123;<br><span class="hljs-attr">num</span>: <span class="hljs-number">10</span>,<br>&#125;;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj1 === obj2); <span class="hljs-comment">// false</span><br></code></pre></td></tr></table></figure><p>物件在建立時，一樣會產生記憶體，不過這邊的變數儲存的是”記憶體位置”，而不是值（內容）。如上方範例所示，即使兩個物件內容是一致的，在<code>console.log</code>是得到不相等的，因為 obj1 跟 obj2 的記憶體參照位置不同。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> obj1 = &#123;<br><span class="hljs-attr">num</span>: <span class="hljs-number">10</span>,<br>&#125;;<br><span class="hljs-keyword">var</span> obj2 = obj1;<br>obj2.<span class="hljs-property">num</span> = <span class="hljs-number">100</span>;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj1.<span class="hljs-property">num</span>, obj2.<span class="hljs-property">num</span>); <span class="hljs-comment">// 100, 100</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj1 === obj2); <span class="hljs-comment">// true</span><br></code></pre></td></tr></table></figure><p>我們再從這個範例拆解來更了解傳參考：</p><ol><li><code>var obj1 = &#123; num: 10 &#125;</code>，我們建立了一個內容為 <code>&#123;num: 10&#125;</code>的物件，而這個內容會儲存到記憶體(假設為 0x01)，而 obj1 這個變數是指向這個 0x01 的位置。</li><li><code>var obj2 = obj1;</code>，接著我們將 obj1 給賦予到 obj2 變數，不過因為不是”創建”物件，所以 obj2 變數是指向到 0x01 的位置，也就是說 obj2 跟 obj1 都指向相同的記憶體位置。</li><li><code>obj2.num = 100;</code>，雖然以變數名稱來說，似乎是針對 obj2 裡頭的內容做調整，但其實是調整到 0x01 這個記憶體位置所對應的內容。</li><li><code>console.log(obj1.num, obj2.num);</code>，因為都是在 0x01 這個記憶體位置，所以兩者是相同且連動的。</li></ol><p><strong>在物件型別中，變數的赋值和傳遞是以”記憶體位置”來做參照的。</strong></p><h2 id="例外跟結論"><a href="#例外跟結論" class="headerlink" title="例外跟結論"></a>例外跟結論</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> obj1 = &#123;<br><span class="hljs-attr">num</span>: <span class="hljs-number">10</span>,<br>&#125;;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">changeNum</span>(<span class="hljs-params">param</span>) &#123;<br>param.<span class="hljs-property">num</span> = <span class="hljs-number">100</span>;<br>&#125;<br><br><span class="hljs-title function_">changeNum</span>(obj1);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj1); <span class="hljs-comment">// &#123;num: 100&#125;</span><br></code></pre></td></tr></table></figure><p>在上個段落的一開始提到，若以一般、基本狀況來說，原始型別的資料依循傳值的特性，而物件型別的資料則依循傳參考的特性。所以對於上方的範例結果，應該不會感到意外，即使作為 param 參數，它還是指向同個記憶體位置。</p><p>而有了一般狀況，就會有例外，接著我們來看例外的狀況是什麼。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> obj1 = &#123;<br><span class="hljs-attr">num</span>: <span class="hljs-number">10</span>,<br>&#125;;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">changeNum</span>(<span class="hljs-params">param</span>) &#123;<br>param = &#123; <span class="hljs-attr">num</span>: <span class="hljs-number">1000</span> &#125;;<br>&#125;<br><br><span class="hljs-title function_">changeNum</span>(obj1);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj1); <span class="hljs-comment">// 仍然是 num: 10</span><br></code></pre></td></tr></table></figure><p>如果依照剛才提到的傳參考，因為記憶體的指向，我們應該會推敲<code>console.log(obj1);</code>的結果是 <code>&#123; num: 1000 &#125;</code>；不過實際上得到的結果是 <code>&#123;num: 10&#125;</code>，也就是參數(param)中指向新物件時，記憶體將會重新指向，而與原先的物件(obj1)將沒有關聯性。<br>所以主流上對於這個特性，比較大宗是以 Call by Sharing 這個名詞來做解釋，我自己在複習（<del>補技術債</del>）時也燒腦了一下；不過後來覺得不用太拘泥在這些名詞，而是知道 JS 的這些特性，盡可能避免踩雷。</p><h2 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h2><p><a href="https://www.tenlong.com.tw/products/9789864344130?list_name=srh">0 陷阱！0 誤解！8 天重新認識 JavaScript！</a></p><p><a href="https://www.tenlong.com.tw/products/9786263332973?list_name=srh">看完這本就會懂！帶你無痛提升 JavaScript 面試力</a></p><p><a href="https://blog.huli.tw/2018/06/23/javascript-call-by-value-or-reference/">深入探討 JavaScript 中的參數傳遞：call by value 還是 reference？</a></p><p><a href="https://pjchender.blogspot.com/2016/03/javascriptby-referenceby-value.html">[筆記] 談談 JavaScript 中 by reference 和 by value 的重要觀念</a></p><p><a href="https://medium.com/@mengchiang000/js%E5%9F%BA%E6%9C%AC%E8%A7%80%E5%BF%B5-call-by-value-%E9%82%84%E6%98%AFreference-%E5%8F%88%E6%88%96%E6%98%AF-sharing-22a87ca478fc">JS 基本觀念：call by value 還是 reference 又或是 sharing?</a></p>]]></content>
    
    
    <categories>
      
      <category>前端</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JavaScript</tag>
      
      <tag>技術債</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>六角學院 React 入門工作坊第四週（最終）</title>
    <link href="/post/react-workshop-week4.html"/>
    <url>/post/react-workshop-week4.html</url>
    
    <content type="html"><![CDATA[<p>Photo by <a href="https://unsplash.com/@lautaroandreani?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Lautaro Andreani</a> on <a href="https://unsplash.com/photos/xkBaqlcqeb4?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Unsplash</a></p><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>這週很有感的課程內容：<br>React 的優點是體驗 JS 的美好，而缺點也是 JS 的美好；Vue 的優點是幫開發者做了很多，而缺點也是幫開發者做了很多。<br>這段很符合我學習 Vue 跟 React 的心情寫照，2020 參加六角的 Vue 直播班時，剛開始覺得 Vue 的語法有點麻煩，要記滿多規矩的，雖然後來習慣就好了；而今年接觸 React 時，剛開始覺得好自由（<del>真香</del>），但隨著接觸時間稍長，就開始想起 Vue 的好 XD （框架都是工具，最重要的還是要達成什麼）</p><p>因為已經有了第三週的打底，所以這週的作業時間就會比較短。這邊先拆解一下流程：</p><ul><li>React Router：初步分好註冊、登入、Todo 頁面</li><li>刻畫面：這個部分就不列在文章內容中。本來第三週還滿懶惰的，所以是拿課程範例來改；不過等到要做最終作業時，又有點手癢想手刻一下…</li><li>註冊頁面<ul><li>除了原先的註冊 api，也會引入 SweetAlert2 做註冊成功或失敗的 popup 提示 (全部頁面都會使用)</li><li>註冊成功後，導向到登入頁面</li><li>防止註冊按鈕被連續點擊</li></ul></li><li>登入頁面<ul><li>登入成功與失敗，會用 popup 做提示。登入成功時，設置秒數導至 todo 頁面</li><li>登入成功後取得 token，並儲存在 document.cookie</li><li>防止登入按鈕被連續點擊</li></ul></li><li>Todo 頁面<ul><li>state 定義</li><li>驗證 api：驗證成功就可以使用 todo，如果驗證失敗，就用 popup 提醒使用者，並導回登入頁</li><li>取得待辦資料 (getTodo)</li><li>待辦的新增、刪除、編輯、狀態切換（成功與失敗的提醒）</li><li>全部、待完成、已完成的待辦篩選</li><li>從 todo 分出的元件</li><li>待完成待辦的數量顯示、清除已完成項目功能<ul><li>（2023.09.04 調整，原先寫錯成”已完成待辦的數量顯示”，程式以及這篇文章已調整為”待完成”）</li></ul></li><li>登出，popup 提醒使用者，然後導到登入頁</li></ul></li></ul><p><a href="https://www.billyji.com/react-workshop-week4-todolist/#/">第四週作品</a><br><a href="https://github.com/yaj55billy/react-workshop-week4-todolist">第四週程式碼</a></p><hr><h2 id="React-Router"><a href="#React-Router" class="headerlink" title="React Router"></a>React Router</h2><p>首先在專案中，引入 React Router <code>npm i react-router-dom</code>，然後在 main.jsx 進入點，從 React Router 引用 <code>&lt;HashRouter&gt;</code> 並包在 <code>&lt;App&gt;</code> 的外層。</p><p>接著可以照著課程指導的步驟：</p><ol><li>建立元件（頁面元件放在 view 資料夾）</li><li>設置路由表 （import 元件）</li><li>加入連結 （這邊不會用到）</li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// main.jsx</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDOM</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-dom/client&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">HashRouter</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-router-dom&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./App.jsx&quot;</span>;<br><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">createRoot</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;root&quot;</span>)).<span class="hljs-title function_">render</span>(<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">HashRouter</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">HashRouter</span>&gt;</span></span><br>);<br></code></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// App.jsx</span><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Routes</span>, <span class="hljs-title class_">Route</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-router-dom&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;./styles/all.sass&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">SignUp</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./views/SignUp.jsx&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">SignIn</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./views/SignIn.jsx&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Todo</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./views/Todo.jsx&quot;</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br><span class="hljs-keyword">return</span> (<br><span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Routes</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/&quot;</span> <span class="hljs-attr">element</span>=<span class="hljs-string">&#123;</span>&lt;<span class="hljs-attr">SignIn</span> /&gt;</span>&#125; /&gt;</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/signup&quot;</span> <span class="hljs-attr">element</span>=<span class="hljs-string">&#123;</span>&lt;<span class="hljs-attr">SignUp</span> /&gt;</span>&#125; /&gt;</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/todo&quot;</span> <span class="hljs-attr">element</span>=<span class="hljs-string">&#123;</span>&lt;<span class="hljs-attr">Todo</span> /&gt;</span>&#125; /&gt;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">Routes</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/&gt;</span></span><br>);<br>&#125;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;<br></code></pre></td></tr></table></figure><h2 id="API"><a href="#API" class="headerlink" title="API"></a>API</h2><p>跟第三週一樣把 api 獨立成一支 js 來管理，不過內容有一些不同，因為在 todo 頁面驗證後，會在 todoBase 這個 axios 實體帶入以下這個設定：<code>todoBase.defaults.headers.common[&quot;Authorization&quot;] = todoToken</code>，所以在 todo 頁面用到的 api 就可以省略 headers 這個參數</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// api/index.js</span><br><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;axios&quot;</span>;<br><br><span class="hljs-comment">// todolist api</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> todoBase = axios.<span class="hljs-title function_">create</span>(&#123;<br><span class="hljs-attr">baseURL</span>: <span class="hljs-string">&quot;https://todolist-api.hexschool.io&quot;</span>,<br>&#125;);<br><br><span class="hljs-comment">// 註冊</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">apiUsersSignUp</span> = (<span class="hljs-params">data</span>) =&gt; todoBase.<span class="hljs-title function_">post</span>(<span class="hljs-string">&quot;/users/sign_up&quot;</span>, data);<br><br><span class="hljs-comment">// 登入</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">apiUsersSignIn</span> = (<span class="hljs-params">data</span>) =&gt; todoBase.<span class="hljs-title function_">post</span>(<span class="hljs-string">&quot;/users/sign_in&quot;</span>, data);<br><br><span class="hljs-comment">// 驗證</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">apiUsersCheckout</span> = (<span class="hljs-params">headers</span>) =&gt;<br>todoBase.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;/users/checkout&quot;</span>, headers);<br><br><span class="hljs-comment">// 登出</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">apiUsersSignOut</span> = (<span class="hljs-params"></span>) =&gt; todoBase.<span class="hljs-title function_">post</span>(<span class="hljs-string">&quot;/users/sign_out&quot;</span>, &#123;&#125;);<br><br><span class="hljs-comment">// 取得所有待辦</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">apiGetTodos</span> = (<span class="hljs-params"></span>) =&gt; todoBase.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;/todos/&quot;</span>);<br><br><span class="hljs-comment">// 新增待辦</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">apiPostTodos</span> = (<span class="hljs-params">data</span>) =&gt; todoBase.<span class="hljs-title function_">post</span>(<span class="hljs-string">&quot;/todos/&quot;</span>, data);<br><br><span class="hljs-comment">// 刪除待辦</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">apiDeleteTodos</span> = (<span class="hljs-params">id</span>) =&gt; todoBase.<span class="hljs-title function_">delete</span>(<span class="hljs-string">`/todos/<span class="hljs-subst">$&#123;id&#125;</span>`</span>);<br><br><span class="hljs-comment">// 切換待辦狀態</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">apiPatchTodos</span> = (<span class="hljs-params">id</span>) =&gt; todoBase.<span class="hljs-title function_">patch</span>(<span class="hljs-string">`/todos/<span class="hljs-subst">$&#123;id&#125;</span>/toggle`</span>, &#123;&#125;);<br><br><span class="hljs-comment">// 編輯待辦文字</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">apiPutTodos</span> = (<span class="hljs-params">id, data</span>) =&gt; todoBase.<span class="hljs-title function_">put</span>(<span class="hljs-string">`/todos/<span class="hljs-subst">$&#123;id&#125;</span>`</span>, data);<br></code></pre></td></tr></table></figure><h2 id="註冊"><a href="#註冊" class="headerlink" title="註冊"></a>註冊</h2><p>這邊單純呈現註冊頁的畫面部分：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// signUp.jsx</span><br><span class="hljs-comment">// ... 略</span><br><br><span class="hljs-keyword">return</span> (<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;sign-up&quot;</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;content&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;content__header&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;content__title&quot;</span>&gt;</span>註冊帳號<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;content__body&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;form&quot;</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">&#123;handleSubmit(onSubmit)&#125;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;form__item&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;form__label&quot;</span> <span class="hljs-attr">htmlFor</span>=<span class="hljs-string">&quot;signupEmail&quot;</span>&gt;</span></span><br><span class="language-xml">Email</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">className</span>=<span class="hljs-string">&quot;form__input&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">type</span>=<span class="hljs-string">&quot;email&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">id</span>=<span class="hljs-string">&quot;signupEmail&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;請輸入 email&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">required</span></span></span><br><span class="hljs-tag"><span class="language-xml">&#123;<span class="hljs-attr">...register</span>(&quot;<span class="hljs-attr">email</span>&quot;)&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">/&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;form__item&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;form__label&quot;</span> <span class="hljs-attr">htmlFor</span>=<span class="hljs-string">&quot;nickname&quot;</span>&gt;</span></span><br><span class="language-xml">您的暱稱</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">className</span>=<span class="hljs-string">&quot;form__input&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">id</span>=<span class="hljs-string">&quot;nickname&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;請輸入您的暱稱&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">required</span></span></span><br><span class="hljs-tag"><span class="language-xml">&#123;<span class="hljs-attr">...register</span>(&quot;<span class="hljs-attr">nickname</span>&quot;)&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">/&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;form__item&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;form__label&quot;</span> <span class="hljs-attr">htmlFor</span>=<span class="hljs-string">&quot;signupPassword&quot;</span>&gt;</span></span><br><span class="language-xml">密碼</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">className</span>=<span class="hljs-string">&quot;form__input&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">id</span>=<span class="hljs-string">&quot;signupPassword&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;請輸入密碼&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">required</span></span></span><br><span class="hljs-tag"><span class="language-xml">&#123;<span class="hljs-attr">...register</span>(&quot;<span class="hljs-attr">password</span>&quot;)&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">/&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;text-center mt-6&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;form__button&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span>&gt;</span></span><br><span class="language-xml">註冊帳號</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;text-center mt-3&quot;</span>&gt;</span></span><br><span class="language-xml">已有帳號了？<span class="hljs-tag">&lt;<span class="hljs-name">NavLink</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/&quot;</span>&gt;</span>登入<span class="hljs-tag">&lt;/<span class="hljs-name">NavLink</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>);<br></code></pre></td></tr></table></figure><p>再來是註冊的程式部分：</p><ul><li>當填好表單按下註冊按鈕時，會執行 onSubmit 這個函式，並在參數中帶進表單資料，接著就會運行註冊的 api</li><li>註冊成功或失敗時，會使用 sweetalert2 引入的 popup 來通知使用者</li><li>註冊成功或失敗時，會將表單欄位清空。這邊是從 useForm 引出 reset 的功能</li><li>註冊成功時，會透過 navigate 導到登入頁面</li><li><code>const [isDisabled, setDisabled] = useState(false);</code> 這個狀態的定義，主要是綁在註冊按鈕的 disabled，在 api 過程讓按鈕為不能點擊的狀態，直到 api 過程結束（防止按鈕被連續點擊）</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// signUp.jsx</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Swal</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;sweetalert2&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">NavLink</span>, useNavigate &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-router-dom&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; useForm &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-hook-form&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; apiUsersSignUp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../api&quot;</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">SignUp</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">const</span> [isDisabled, setDisabled] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);<br>  <span class="hljs-keyword">const</span> &#123; register, handleSubmit, reset &#125; = <span class="hljs-title function_">useForm</span>();<br><br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">resetHandle</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-title function_">reset</span>();<br>  &#125;;<br><br>  <span class="hljs-keyword">const</span> navigate = <span class="hljs-title function_">useNavigate</span>();<br><br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onSubmit</span> = (<span class="hljs-params">data</span>) =&gt; &#123;<br>    <span class="hljs-title function_">setDisabled</span>(<span class="hljs-literal">true</span>);<br>    <span class="hljs-title function_">apiUsersSignUp</span>(data)<br>      .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-title class_">Swal</span>.<span class="hljs-title function_">fire</span>(&#123;<br>          <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;恭喜註冊成功！&quot;</span>,<br>          <span class="hljs-attr">text</span>: <span class="hljs-string">&quot;為您導至登入頁...&quot;</span>,<br>          <span class="hljs-attr">icon</span>: <span class="hljs-string">&quot;success&quot;</span>,<br>          <span class="hljs-attr">showConfirmButton</span>: <span class="hljs-literal">false</span>,<br>          <span class="hljs-attr">timer</span>: <span class="hljs-number">1500</span>,<br>        &#125;);<br>        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>          <span class="hljs-title function_">navigate</span>(<span class="hljs-string">&quot;/&quot;</span>);<br>        &#125;, <span class="hljs-number">1500</span>);<br>      &#125;)<br>      .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> &#123;<br>        <span class="hljs-title class_">Swal</span>.<span class="hljs-title function_">fire</span>(&#123;<br>          <span class="hljs-attr">title</span>: error.<span class="hljs-property">response</span>.<span class="hljs-property">data</span>.<span class="hljs-property">message</span>,<br>          <span class="hljs-attr">icon</span>: <span class="hljs-string">&quot;error&quot;</span>,<br>          <span class="hljs-attr">showConfirmButton</span>: <span class="hljs-literal">false</span>,<br>          <span class="hljs-attr">timer</span>: <span class="hljs-number">1500</span>,<br>        &#125;);<br>      &#125;)<br>      .<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-title function_">setDisabled</span>(<span class="hljs-literal">false</span>);<br>        <span class="hljs-title function_">resetHandle</span>();<br>      &#125;);<br>  &#125;;<br>  <span class="hljs-keyword">return</span>(<br>    <span class="hljs-comment">// ... 略</span><br>  )<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="登入"><a href="#登入" class="headerlink" title="登入"></a>登入</h2><p>跟註冊頁面相似，所以這邊只呈現程式部分：</p><ul><li>登入成功或失敗時，會使用 sweetalert2 引入的 popup 來通知使用者</li><li>登入成功或失敗時，會將表單欄位清空。這邊是從 useForm 引出 reset 的功能</li><li>登入成功後，會從回應資料取出 token，並存到 document.cookie，待之後 todo 頁面再取出</li><li>登入成功後，使用 navigate 導向到 todo 頁面</li><li><code>const [isDisabled, setDisabled] = useState(false);</code> 這個狀態的定義，主要是綁在登入按鈕的 disabled，在 api 過程讓按鈕為不能點擊的狀態，直到 api 過程結束（防止按鈕被連續點擊）</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// signIn.jsx</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Swal</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;sweetalert2&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">NavLink</span>, useNavigate &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-router-dom&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; useForm &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-hook-form&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; apiUsersSignIn &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../api&quot;</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">SignIn</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br><span class="hljs-keyword">const</span> [isDisabled, setDisabled] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);<br><span class="hljs-keyword">const</span> &#123; register, handleSubmit, reset &#125; = <span class="hljs-title function_">useForm</span>();<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">resetHandle</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br><span class="hljs-title function_">reset</span>();<br>&#125;;<br><br><span class="hljs-keyword">const</span> navigate = <span class="hljs-title function_">useNavigate</span>();<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">onSubmit</span> = (<span class="hljs-params">data</span>) =&gt; &#123;<br><span class="hljs-title function_">setDisabled</span>(<span class="hljs-literal">true</span>);<br><span class="hljs-title function_">apiUsersSignIn</span>(data)<br>.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br><span class="hljs-keyword">const</span> &#123; token &#125; = res.<span class="hljs-property">data</span>;<br><span class="hljs-keyword">const</span> tomorrow = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();<br>tomorrow.<span class="hljs-title function_">setDate</span>(tomorrow.<span class="hljs-title function_">getDate</span>() + <span class="hljs-number">1</span>);<br><span class="hljs-variable language_">document</span>.<span class="hljs-property">cookie</span> = <span class="hljs-string">`token=<span class="hljs-subst">$&#123;token&#125;</span>;expires=<span class="hljs-subst">$&#123;tomorrow.toUTCString()&#125;</span>`</span>;<br><span class="hljs-title class_">Swal</span>.<span class="hljs-title function_">fire</span>(&#123;<br><span class="hljs-attr">title</span>: <span class="hljs-string">&quot;登入成功！&quot;</span>,<br><span class="hljs-attr">text</span>: <span class="hljs-string">&quot;為您導至 Todo 頁面...&quot;</span>,<br><span class="hljs-attr">icon</span>: <span class="hljs-string">&quot;success&quot;</span>,<br><span class="hljs-attr">showConfirmButton</span>: <span class="hljs-literal">false</span>,<br><span class="hljs-attr">timer</span>: <span class="hljs-number">1500</span>,<br>&#125;);<br><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br><span class="hljs-title function_">navigate</span>(<span class="hljs-string">&quot;/todo&quot;</span>);<br>&#125;, <span class="hljs-number">1500</span>);<br>&#125;)<br>.<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> &#123;<br><span class="hljs-title class_">Swal</span>.<span class="hljs-title function_">fire</span>(&#123;<br><span class="hljs-attr">title</span>: <span class="hljs-string">&quot;登入失敗&quot;</span>,<br><span class="hljs-attr">text</span>: <span class="hljs-string">&quot;請檢查帳密是否正確，或是否有註冊過。&quot;</span>,<br><span class="hljs-attr">icon</span>: <span class="hljs-string">&quot;error&quot;</span>,<br><span class="hljs-attr">showConfirmButton</span>: <span class="hljs-literal">false</span>,<br><span class="hljs-attr">timer</span>: <span class="hljs-number">1500</span>,<br>&#125;);<br>&#125;)<br>.<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> &#123;<br><span class="hljs-title function_">setDisabled</span>(<span class="hljs-literal">false</span>);<br><span class="hljs-title function_">resetHandle</span>();<br>&#125;);<br>&#125;;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="Todo-頁"><a href="#Todo-頁" class="headerlink" title="Todo 頁"></a>Todo 頁</h2><h3 id="state-定義"><a href="#state-定義" class="headerlink" title="state 定義"></a>state 定義</h3><p>首先我們先定義好會用到的 state：</p><ul><li>todo 資料：<code>const [todo, setTodo] = useState([])</code></li><li>todo 資料的分類（全部、待完成、已完成）：<code>const [todoType, setTodoType] = useState(&quot;all&quot;);</code></li><li>待辦事項 input：<code>const [input, setInput] = useState(&quot;&quot;)</code></li><li>用戶的 nickname：<code>const [nickname, setNickname] = useState(&quot;&quot;)</code></li><li>編輯的時候會使用上暫存物件：<code>const [editTarget, setEditTarget] = useState(&#123;&#125;)</code></li></ul><h3 id="驗證-api"><a href="#驗證-api" class="headerlink" title="驗證 api"></a>驗證 api</h3><p>進到 todo 頁面時，首先需先經過 token 的驗證，驗證成功才能在此頁面操作，否則就會通知驗證失敗並導回登入頁。</p><ol><li>從 document.cookie 取出剛才在登入成功時設置的 token，並存取在 todoToken 這個變數中</li><li>設置 checkLogin 這個函式，內容會使用 apiUsersCheckout 這支驗證 api，記得要帶上 <code>headers:&#123;Authorization: todoToken&#125;</code><ul><li>驗證成功時會設置 nickname， 以及將 token 設置在 todoBase 這個實體，之後在 todo 頁面的 api 操作都不需帶上 <code>headers:&#123;Authorization: todoToken&#125;</code>，接著透過 getTodos() 獲取所有待辦項目。（這個步驟還未定義 getTodos()）</li><li>驗證失敗時，會用 popup 來通知，之後導回登入頁面</li></ul></li><li>透過 useEffect 去執行 checkLogin 這個函式（第二個空陣列參數，表示只有最開始時會執行一次）</li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// todo.jsx</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Swal</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;sweetalert2&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; useNavigate &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-router-dom&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; useState, useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> &#123;<br>apiUsersCheckout,<br>apiGetTodos,<br>apiPostTodos,<br>apiDeleteTodos,<br>apiPatchTodos,<br>apiPutTodos,<br>todoBase,<br>apiUsersSignOut,<br>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../api&quot;</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">Todo</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br><span class="hljs-comment">// ... 略</span><br><span class="hljs-keyword">const</span> navigate = <span class="hljs-title function_">useNavigate</span>();<br><br><span class="hljs-keyword">const</span> todoToken = <span class="hljs-variable language_">document</span>.<span class="hljs-property">cookie</span><br>.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;; &quot;</span>)<br>.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">row</span>) =&gt;</span> row.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">&quot;token=&quot;</span>))<br>?.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;=&quot;</span>)[<span class="hljs-number">1</span>];<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">checkLogin</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br><span class="hljs-title function_">apiUsersCheckout</span>(&#123;<br><span class="hljs-attr">headers</span>: &#123;<br><span class="hljs-title class_">Authorization</span>: todoToken,<br>&#125;,<br>&#125;)<br>.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br><span class="hljs-title function_">setNickname</span>(res.<span class="hljs-property">data</span>.<span class="hljs-property">nickname</span>);<br>todoBase.<span class="hljs-property">defaults</span>.<span class="hljs-property">headers</span>.<span class="hljs-property">common</span>[<span class="hljs-string">&quot;Authorization&quot;</span>] = todoToken;<br><span class="hljs-title function_">getTodos</span>();<br>&#125;)<br>.<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> &#123;<br><span class="hljs-title class_">Swal</span>.<span class="hljs-title function_">fire</span>(&#123;<br><span class="hljs-attr">title</span>: <span class="hljs-string">&quot;驗證失敗，請先登入&quot;</span>,<br><span class="hljs-attr">text</span>: <span class="hljs-string">&quot;稍後導至登入頁&quot;</span>,<br><span class="hljs-attr">icon</span>: <span class="hljs-string">&quot;error&quot;</span>,<br><span class="hljs-attr">showConfirmButton</span>: <span class="hljs-literal">false</span>,<br><span class="hljs-attr">timer</span>: <span class="hljs-number">1500</span>,<br>&#125;);<br><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br><span class="hljs-title function_">navigate</span>(<span class="hljs-string">&quot;/&quot;</span>);<br>&#125;, <span class="hljs-number">1500</span>);<br>&#125;);<br>&#125;;<br><br><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br><span class="hljs-title function_">checkLogin</span>();<br>&#125;, []);<br><span class="hljs-comment">// ... 略</span><br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="取得待辦資料-getTodos"><a href="#取得待辦資料-getTodos" class="headerlink" title="取得待辦資料 (getTodos)"></a>取得待辦資料 (getTodos)</h3><p>再來我們要定義 getTodos 這個函式，內容透過 apiGetTodos() 這支取得所有待辦的 api 來取得資料。<br>不論在驗證後，以及新增、刪除、修改待辦等動作都會來執行這個函式，重新抓取最新資料。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// todo.jsx</span><br><span class="hljs-comment">// ... 略</span><br><span class="hljs-keyword">import</span> &#123; useState, useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> &#123;<br>apiUsersCheckout,<br>apiGetTodos,<br>apiPostTodos,<br>apiDeleteTodos,<br>apiPatchTodos,<br>apiPutTodos,<br>todoBase,<br>apiUsersSignOut,<br>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../api&quot;</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">Todo</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br><span class="hljs-keyword">const</span> [todo, setTodo] = <span class="hljs-title function_">useState</span>([]);<br><span class="hljs-comment">// ... 略</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">getTodos</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br><span class="hljs-title function_">apiGetTodos</span>()<br>.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br><span class="hljs-title function_">setTodo</span>(res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>);<br>&#125;)<br>.<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err);<br>&#125;);<br>&#125;;<br><span class="hljs-comment">// ... 略</span><br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="待辦的新增、刪除、編輯、狀態切換"><a href="#待辦的新增、刪除、編輯、狀態切換" class="headerlink" title="待辦的新增、刪除、編輯、狀態切換"></a>待辦的新增、刪除、編輯、狀態切換</h3><p>在待辦的新增、刪除、編輯、狀態切換等函式中，除了從 api&#x2F;index.js 取得各個 api 操作，也使用上 SweetAlert2 的 Toast 設置，在 api 執行後的成功或失敗做個通知。</p><p>提醒：</p><ul><li>在每個 api 執行後，記得呼叫 getTodos()，重新獲得最新資料</li><li>待辦新增（addTodo）記得要清空 input（<code>setInput(&quot;&quot;)</code>）</li><li>刪除與編輯記得要帶上 id</li><li>編輯待辦（updateTodo），記得要清空暫存的物件（<code>setEditTarget(&#123;&#125;)</code>）</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// todo.jsx</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Swal</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;sweetalert2&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; useNavigate &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-router-dom&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; useState, useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> &#123;<br>apiUsersCheckout,<br>apiGetTodos,<br>apiPostTodos,<br>apiDeleteTodos,<br>apiPatchTodos,<br>apiPutTodos,<br>todoBase,<br>apiUsersSignOut,<br>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../api&quot;</span>;<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">Todo</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br><span class="hljs-keyword">const</span> [todo, setTodo] = <span class="hljs-title function_">useState</span>([]);<br><span class="hljs-keyword">const</span> [todoType, setTodoType] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;all&quot;</span>);<br><span class="hljs-keyword">const</span> [input, setInput] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;&quot;</span>);<br><span class="hljs-keyword">const</span> [nickname, setNickname] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;&quot;</span>);<br><span class="hljs-keyword">const</span> [editTarget, setEditTarget] = <span class="hljs-title function_">useState</span>(&#123;&#125;);<br><br><span class="hljs-comment">// ...略</span><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">Toast</span> = <span class="hljs-title class_">Swal</span>.<span class="hljs-title function_">mixin</span>(&#123;<br><span class="hljs-attr">toast</span>: <span class="hljs-literal">true</span>,<br><span class="hljs-attr">position</span>: <span class="hljs-string">&quot;top-end&quot;</span>,<br><span class="hljs-attr">showConfirmButton</span>: <span class="hljs-literal">false</span>,<br><span class="hljs-attr">customClass</span>: &#123;<br><span class="hljs-attr">popup</span>: <span class="hljs-string">&quot;colored-toast&quot;</span>,<br>&#125;,<br><span class="hljs-attr">timer</span>: <span class="hljs-number">1500</span>,<br><span class="hljs-attr">timerProgressBar</span>: <span class="hljs-literal">true</span>,<br>&#125;);<br><br><span class="hljs-comment">// 新增項目</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">addTodo</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br><span class="hljs-keyword">if</span> (input === <span class="hljs-string">&quot;&quot;</span>) <span class="hljs-keyword">return</span>;<br><span class="hljs-title function_">apiPostTodos</span>(&#123; <span class="hljs-attr">content</span>: input &#125;)<br>.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> &#123;<br><span class="hljs-title class_">Toast</span>.<span class="hljs-title function_">fire</span>(&#123;<br><span class="hljs-attr">icon</span>: <span class="hljs-string">&quot;success&quot;</span>,<br><span class="hljs-attr">title</span>: <span class="hljs-string">&quot;新增待辦成功&quot;</span>,<br>&#125;);<br><span class="hljs-title function_">getTodos</span>();<br>&#125;)<br>.<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> &#123;<br><span class="hljs-title class_">Toast</span>.<span class="hljs-title function_">fire</span>(&#123;<br><span class="hljs-attr">icon</span>: <span class="hljs-string">&quot;error&quot;</span>,<br><span class="hljs-attr">title</span>: <span class="hljs-string">&quot;新增待辦失敗，請再檢查看看&quot;</span>,<br>&#125;);<br>&#125;)<br>.<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> &#123;<br><span class="hljs-title function_">setInput</span>(<span class="hljs-string">&quot;&quot;</span>); <span class="hljs-comment">// 清空</span><br><span class="hljs-title function_">setTodoType</span>(<span class="hljs-string">&quot;all&quot;</span>); <span class="hljs-comment">// 將頁籤切換為「全部」</span><br>&#125;);<br>&#125;;<br><br><span class="hljs-comment">// 刪除項目</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">deleteTodo</span> = (<span class="hljs-params">id</span>) =&gt; &#123;<br><span class="hljs-title function_">apiDeleteTodos</span>(id)<br>.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> &#123;<br><span class="hljs-title class_">Toast</span>.<span class="hljs-title function_">fire</span>(&#123;<br><span class="hljs-attr">icon</span>: <span class="hljs-string">&quot;success&quot;</span>,<br><span class="hljs-attr">title</span>: <span class="hljs-string">&quot;刪除待辦成功&quot;</span>,<br>&#125;);<br><span class="hljs-title function_">getTodos</span>();<br>&#125;)<br>.<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> &#123;<br><span class="hljs-title class_">Toast</span>.<span class="hljs-title function_">fire</span>(&#123;<br><span class="hljs-attr">icon</span>: <span class="hljs-string">&quot;error&quot;</span>,<br><span class="hljs-attr">title</span>: <span class="hljs-string">&quot;刪除待辦失敗，請再檢查看看&quot;</span>,<br>&#125;);<br>&#125;);<br>&#125;;<br><br><span class="hljs-comment">// 切換狀態（是否完成）</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleTodo</span> = (<span class="hljs-params">id</span>) =&gt; &#123;<br><span class="hljs-title function_">apiPatchTodos</span>(id)<br>.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> &#123;<br><span class="hljs-title class_">Toast</span>.<span class="hljs-title function_">fire</span>(&#123;<br><span class="hljs-attr">icon</span>: <span class="hljs-string">&quot;success&quot;</span>,<br><span class="hljs-attr">title</span>: <span class="hljs-string">&quot;待辦狀態更新成功&quot;</span>,<br>&#125;);<br><span class="hljs-title function_">getTodos</span>();<br>&#125;)<br>.<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> &#123;<br><span class="hljs-title class_">Toast</span>.<span class="hljs-title function_">fire</span>(&#123;<br><span class="hljs-attr">icon</span>: <span class="hljs-string">&quot;error&quot;</span>,<br><span class="hljs-attr">title</span>: <span class="hljs-string">&quot;待辦狀態更新失敗，請再檢查看看&quot;</span>,<br>&#125;);<br>&#125;);<br>&#125;;<br><br><span class="hljs-comment">// 編輯項目</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">updateTodo</span> = (<span class="hljs-params">id, content</span>) =&gt; &#123;<br><span class="hljs-title function_">apiPutTodos</span>(id, &#123; content &#125;)<br>.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> &#123;<br><span class="hljs-title class_">Toast</span>.<span class="hljs-title function_">fire</span>(&#123;<br><span class="hljs-attr">icon</span>: <span class="hljs-string">&quot;success&quot;</span>,<br><span class="hljs-attr">title</span>: <span class="hljs-string">&quot;編輯待辦成功&quot;</span>,<br>&#125;);<br><span class="hljs-title function_">getTodos</span>();<br>&#125;)<br>.<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> &#123;<br><span class="hljs-title class_">Toast</span>.<span class="hljs-title function_">fire</span>(&#123;<br><span class="hljs-attr">icon</span>: <span class="hljs-string">&quot;error&quot;</span>,<br><span class="hljs-attr">title</span>: <span class="hljs-string">&quot;編輯待辦失敗，請再檢查看看&quot;</span>,<br>&#125;);<br>&#125;)<br>.<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> &#123;<br><span class="hljs-title function_">setEditTarget</span>(&#123;&#125;);<br>&#125;);<br>&#125;;<br><br><span class="hljs-comment">//...略</span><br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="全部、待完成、已完成的待辦篩選"><a href="#全部、待完成、已完成的待辦篩選" class="headerlink" title="全部、待完成、已完成的待辦篩選"></a>全部、待完成、已完成的待辦篩選</h3><ol><li>如同我們前面定義的 <code>const [todoType, setTodoType] = useState(&quot;all&quot;);</code>，這個部分用來定義 todo 篩選的三種狀態：全部（all）、待完成（active）、已完成（completed）</li><li>再來我們用 todoTypeChange 這個函式來定義 todoType 狀態的切換，這是使用按鈕點擊（帶上狀態）來觸發</li><li>根據 todoType 狀態的不同，用 todo.filter 來篩選出我們需要的資料，並存在 filterTodo 這個變數中，之後在樣板中是以 filterTodo.map() 來渲染</li><li>根據 todoType 狀態的不同，做 active class 的切換</li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">Todo</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">const</span> [todo, setTodo] = <span class="hljs-title function_">useState</span>([]);<br>  <span class="hljs-keyword">const</span> [todoType, setTodoType] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;all&quot;</span>);<br>  <span class="hljs-comment">// ... 略</span><br><br>  <span class="hljs-comment">// 切換：全部、待完成、已完成</span><br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">todoTypeChange</span> = (<span class="hljs-params">status</span>) =&gt; &#123;<br>    <span class="hljs-title function_">setTodoType</span>(status);<br>  &#125;;<br><br>  <span class="hljs-comment">// 根據 todoType ，決定顯示要什麼資料</span><br>  <span class="hljs-keyword">const</span> filterTodo = todo.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (todoType === <span class="hljs-string">&quot;completed&quot;</span>) &#123;<br>      <span class="hljs-keyword">return</span> item.<span class="hljs-property">status</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (todoType === <span class="hljs-string">&quot;active&quot;</span>) &#123;<br>      <span class="hljs-keyword">return</span> !item.<span class="hljs-property">status</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>  &#125;);<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="hljs-comment">// ... 略</span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;todo__category&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">className</span>=<span class="hljs-string">&#123;</span>`<span class="hljs-attr">todo__category__list</span> $&#123;</span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">todoType</span> === <span class="hljs-string">&quot;all&quot;</span> ? &quot;<span class="hljs-attr">active</span>&quot; <span class="hljs-attr">:</span> &quot;&quot;</span></span><br><span class="hljs-tag"><span class="language-xml">        &#125;`&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> todoTypeChange(&quot;all&quot;)&#125;</span><br><span class="language-xml">      &gt;</span><br><span class="language-xml">        全部</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">className</span>=<span class="hljs-string">&#123;</span>`<span class="hljs-attr">todo__category__list</span> $&#123;</span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">todoType</span> === <span class="hljs-string">&quot;active&quot;</span> ? &quot;<span class="hljs-attr">active</span>&quot; <span class="hljs-attr">:</span> &quot;&quot;</span></span><br><span class="hljs-tag"><span class="language-xml">        &#125;`&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> todoTypeChange(&quot;active&quot;)&#125;</span><br><span class="language-xml">      &gt;</span><br><span class="language-xml">        待完成</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">className</span>=<span class="hljs-string">&#123;</span>`<span class="hljs-attr">todo__category__list</span> $&#123;</span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">todoType</span> === <span class="hljs-string">&quot;completed&quot;</span> ? &quot;<span class="hljs-attr">active</span>&quot; <span class="hljs-attr">:</span> &quot;&quot;</span></span><br><span class="hljs-tag"><span class="language-xml">        &#125;`&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> todoTypeChange(&quot;completed&quot;)&#125;</span><br><span class="language-xml">      &gt;</span><br><span class="language-xml">        已完成</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;todo__list&quot;</span>&gt;</span></span><br><span class="language-xml">      &#123;filterTodo.map((item) =&gt; &#123;</span><br><span class="language-xml">        return (</span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">TodoItem</span></span></span><br><span class="hljs-tag"><span class="language-xml">            // <span class="hljs-attr">...略</span></span></span><br><span class="hljs-tag"><span class="language-xml">          /&gt;</span></span><br><span class="language-xml">        );</span><br><span class="language-xml">      &#125;)&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br>    <span class="hljs-comment">// ... 略</span><br>  )<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="從-todo-分出的元件"><a href="#從-todo-分出的元件" class="headerlink" title="從 todo 分出的元件"></a>從 todo 分出的元件</h3><p>這次有從 todo 頁面中，分出 TodoItem（todo 項目）、TodoCategory（todo 篩選）這兩個元件。<br>而這個段落會來提一下 TodoItem 這個元件，根據這個元件所需，我們得傳入 todo 項目的資訊（id、content、status），以及一些待辦的函式（刪除、狀態切換、編輯…等），可看下方程式碼的註解。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// todo.jsx</span><br><span class="hljs-comment">// ... 略</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">TodoItem</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../components/TodoItem&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">TodoCategory</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../components/TodoCategory&quot;</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">Todo</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br><span class="hljs-keyword">const</span> [todo, setTodo] = <span class="hljs-title function_">useState</span>([]);<br><span class="hljs-keyword">const</span> [todoType, setTodoType] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;all&quot;</span>);<br><span class="hljs-keyword">const</span> [input, setInput] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;&quot;</span>);<br><span class="hljs-keyword">const</span> [nickname, setNickname] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;&quot;</span>);<br><span class="hljs-keyword">const</span> [editTarget, setEditTarget] = <span class="hljs-title function_">useState</span>(&#123;&#125;);<br><br><span class="hljs-comment">// ... 略</span><br><br><span class="hljs-comment">// 刪除項目</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">deleteTodo</span> = (<span class="hljs-params">id</span>) =&gt; &#123;<br><span class="hljs-comment">// ... 略</span><br>&#125;;<br><br><span class="hljs-comment">// 切換狀態（是否完成）</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleTodo</span> = (<span class="hljs-params">id</span>) =&gt; &#123;<br><span class="hljs-comment">// ... 略</span><br>&#125;;<br><br><span class="hljs-comment">// 編輯項目</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">updateTodo</span> = (<span class="hljs-params">id, content</span>) =&gt; &#123;<br><span class="hljs-comment">// ... 略</span><br>&#125;;<br><br><span class="hljs-comment">// 切換：全部、待完成、已完成</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">todoTypeChange</span> = (<span class="hljs-params">status</span>) =&gt; &#123;<br><span class="hljs-title function_">setTodoType</span>(status);<br>&#125;;<br><br><span class="hljs-comment">// 根據 todoType ，決定顯示要什麼資料</span><br><span class="hljs-keyword">const</span> filterTodo = todo.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> &#123;<br><span class="hljs-keyword">if</span> (todoType === <span class="hljs-string">&quot;completed&quot;</span>) &#123;<br><span class="hljs-keyword">return</span> item.<span class="hljs-property">status</span>;<br>&#125;<br><span class="hljs-keyword">if</span> (todoType === <span class="hljs-string">&quot;active&quot;</span>) &#123;<br><span class="hljs-keyword">return</span> !item.<span class="hljs-property">status</span>;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;);<br><br><span class="hljs-keyword">return</span> (<br><span class="hljs-comment">// ... 略</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;todo__content&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">TodoCategory</span> <span class="hljs-attr">todoType</span>=<span class="hljs-string">&#123;todoType&#125;</span> <span class="hljs-attr">todoTypeChange</span>=<span class="hljs-string">&#123;todoTypeChange&#125;</span> /&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;todo__list&quot;</span>&gt;</span></span><br><span class="language-xml">&#123;filterTodo.map((item) =&gt; &#123;</span><br><span class="language-xml">return (</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">TodoItem</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">key</span>=<span class="hljs-string">&#123;item.id&#125;</span> // <span class="hljs-attr">id</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">id</span>=<span class="hljs-string">&#123;item.id&#125;</span> // <span class="hljs-attr">id</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">content</span>=<span class="hljs-string">&#123;item.content&#125;</span> // <span class="hljs-attr">input</span> <span class="hljs-attr">text</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">status</span>=<span class="hljs-string">&#123;item.status&#125;</span> // <span class="hljs-attr">狀態</span>，<span class="hljs-attr">預設為待完成</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">toggleTodo</span>=<span class="hljs-string">&#123;toggleTodo&#125;</span> // <span class="hljs-attr">狀態切換的函式</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">deleteTodo</span>=<span class="hljs-string">&#123;deleteTodo&#125;</span> // <span class="hljs-attr">刪除項目的函式</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">editTarget</span>=<span class="hljs-string">&#123;editTarget&#125;</span> // <span class="hljs-attr">當前編輯的暫存物件</span> （<span class="hljs-attr">存</span> <span class="hljs-attr">id</span>、<span class="hljs-attr">content</span>)</span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">setEditTarget</span>=<span class="hljs-string">&#123;setEditTarget&#125;</span> // <span class="hljs-attr">當前編輯的暫存物件</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">updateTodo</span>=<span class="hljs-string">&#123;updateTodo&#125;</span> // <span class="hljs-attr">編輯項目的函式</span></span></span><br><span class="hljs-tag"><span class="language-xml">/&gt;</span></span><br><span class="language-xml">);</span><br><span class="language-xml">&#125;)&#125;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>);<br>&#125;;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Todo</span>;<br></code></pre></td></tr></table></figure><p>接下來是 TodoItem.jsx 這個元件本身，要使用透過父層（props）傳進來的資料或函式時，需先引用 propTypes 來做定義。</p><p>再來會提到 editTarget 跟 setEditTarget 的部分，在定義上是用來存取暫時資料，方便用於程式上的判斷。當我們初始去點擊編輯 icon 時，就會觸發 <code>setEditTarget(&#123; id, content &#125;)</code>，並將項目的 id 跟 content(input) 給傳入做暫時資料。<br>而這樣的暫時資料，可以在畫面使用 <code>editTarget.id === id</code> 這樣的方式，來判斷我們點到的是哪一個項目，並顯示相對應的內容。例如我們點到第二個項目，對於這個項目就會顯示一個 input 框，以及一個 check icon，而當我們點擊 check icon 時，就會觸發 updateTodo 的功能，並將 id 跟新的 content(input) 帶進去執行編輯的 api。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// TodoItem.jsx</span><br><span class="hljs-keyword">import</span> propTypes <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;prop-types&quot;</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">TodoItem</span> = (<span class="hljs-params">&#123;</span><br><span class="hljs-params">id,</span><br><span class="hljs-params">content,</span><br><span class="hljs-params">status,</span><br><span class="hljs-params">toggleTodo,</span><br><span class="hljs-params">deleteTodo,</span><br><span class="hljs-params">editTarget,</span><br><span class="hljs-params">setEditTarget,</span><br><span class="hljs-params">updateTodo,</span><br><span class="hljs-params">&#125;</span>) =&gt; &#123;<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">atChange</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br><span class="hljs-title function_">toggleTodo</span>(id);<br>&#125;;<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">atClickDelete</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br><span class="hljs-title function_">deleteTodo</span>(id);<br>&#125;;<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">atClickEdit</span> = (<span class="hljs-params">id, content</span>) =&gt; &#123;<br><span class="hljs-title function_">updateTodo</span>(id, content);<br>&#125;;<br><br><span class="hljs-keyword">return</span> (<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;todo__item&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;todo__label&quot;</span> <span class="hljs-attr">htmlFor</span>=<span class="hljs-string">&#123;id&#125;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">className</span>=<span class="hljs-string">&quot;todo__check&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">id</span>=<span class="hljs-string">&#123;id&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">checked</span>=<span class="hljs-string">&#123;status&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;atChange&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">/&gt;</span></span><br><span class="language-xml">&#123;editTarget.id === id ? (</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">className</span>=<span class="hljs-string">&quot;form__input&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">value</span>=<span class="hljs-string">&#123;editTarget.content&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;(e)</span> =&gt;</span> &#123;</span><br><span class="language-xml">setEditTarget(&#123; ...editTarget, content: e.target.value &#125;);</span><br><span class="language-xml">&#125;&#125;</span><br><span class="language-xml">/&gt;</span><br><span class="language-xml">) : (</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;todo__text&quot;</span>&gt;</span>&#123;content&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">)&#125;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;todo__icon&quot;</span>&gt;</span></span><br><span class="language-xml">&#123;editTarget.id === id ? (</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">i</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">className</span>=<span class="hljs-string">&quot;fa-solid fa-check&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> atClickEdit(editTarget.id, editTarget.content)&#125;</span><br><span class="language-xml">&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span></span><br><span class="language-xml">) : (</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">i</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">className</span>=<span class="hljs-string">&quot;fa-regular fa-pen-to-square&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">setEditTarget(&#123; id, content &#125;);</span><br><span class="language-xml">&#125;&#125;</span><br><span class="language-xml">&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span></span><br><span class="language-xml">)&#125;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;todo__icon&quot;</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;atClickDelete&#125;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;fa fa-times&quot;</span> /&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br>);<br>&#125;;<br><br><span class="hljs-title class_">TodoItem</span>.<span class="hljs-property">propTypes</span> = &#123;<br><span class="hljs-attr">id</span>: propTypes.<span class="hljs-property">string</span>.<span class="hljs-property">isRequired</span>,<br><span class="hljs-attr">content</span>: propTypes.<span class="hljs-property">string</span>.<span class="hljs-property">isRequired</span>,<br><span class="hljs-attr">status</span>: propTypes.<span class="hljs-property">bool</span>.<span class="hljs-property">isRequired</span>,<br><span class="hljs-attr">toggleTodo</span>: propTypes.<span class="hljs-property">func</span>.<span class="hljs-property">isRequired</span>,<br><span class="hljs-attr">deleteTodo</span>: propTypes.<span class="hljs-property">func</span>.<span class="hljs-property">isRequired</span>,<br><span class="hljs-attr">editTarget</span>: propTypes.<span class="hljs-property">object</span>.<span class="hljs-property">isRequired</span>,<br><span class="hljs-attr">setEditTarget</span>: propTypes.<span class="hljs-property">func</span>.<span class="hljs-property">isRequired</span>,<br><span class="hljs-attr">updateTodo</span>: propTypes.<span class="hljs-property">func</span>.<span class="hljs-property">isRequired</span>,<br>&#125;;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">TodoItem</span>;<br></code></pre></td></tr></table></figure><h3 id="“待完成”待辦的數量顯示、清除”已完成”項目功能"><a href="#“待完成”待辦的數量顯示、清除”已完成”項目功能" class="headerlink" title="“待完成”待辦的數量顯示、清除”已完成”項目功能"></a>“待完成”待辦的數量顯示、清除”已完成”項目功能</h3><p>“待完成”待辦的數量顯示比較單純，宣告 todoUnCompleted 這個變數去儲存 todo 篩選待完成的項目，然後再用 <code>&#123;todoUnCompleted.length&#125;</code> 渲染到畫面上。</p><p>而清除”已完成”項目的功能，則是使用 todo 去篩選已完成項目，然後帶入這些已完成項目的 id 到 apiDeleteTodos 做刪除處理。因為要刪除的項目不只一個，所以會使用到 Promise.all 來等待全部已完成的項目都被刪除後，再用 Toast 通知使用者。<br>（記得 getTodos() 重新獲取資料。）</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// todo.jsx</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Swal</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;sweetalert2&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; useNavigate &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-router-dom&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; useState, useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> &#123;<br>apiUsersCheckout,<br>apiGetTodos,<br>apiPostTodos,<br>apiDeleteTodos,<br>apiPatchTodos,<br>apiPutTodos,<br>todoBase,<br>apiUsersSignOut,<br>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../api&quot;</span>;<br><span class="hljs-comment">// ... 略</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">Todo</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br><span class="hljs-keyword">const</span> [todo, setTodo] = <span class="hljs-title function_">useState</span>([]);<br><span class="hljs-keyword">const</span> [todoType, setTodoType] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;all&quot;</span>);<br><span class="hljs-keyword">const</span> [input, setInput] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;&quot;</span>);<br><span class="hljs-keyword">const</span> [nickname, setNickname] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;&quot;</span>);<br><span class="hljs-keyword">const</span> [editTarget, setEditTarget] = <span class="hljs-title function_">useState</span>(&#123;&#125;);<br><br><span class="hljs-comment">// ... 略</span><br><br><span class="hljs-comment">// 從原先 list 資料去 filter</span><br><span class="hljs-keyword">const</span> todoUnCompleted = todo.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> &#123;<br><span class="hljs-keyword">return</span> !item.<span class="hljs-property">status</span>;<br>&#125;);<br><br><span class="hljs-comment">// 清除已完成項目</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">clearTodoCompleted</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br><span class="hljs-keyword">const</span> result = todo.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> &#123;<br><span class="hljs-keyword">if</span> (item.<span class="hljs-property">status</span>) &#123;<br><span class="hljs-title function_">apiDeleteTodos</span>(item.<span class="hljs-property">id</span>);<br>&#125;<br>&#125;);<br><span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(result).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> &#123;<br><span class="hljs-title class_">Toast</span>.<span class="hljs-title function_">fire</span>(&#123;<br><span class="hljs-attr">icon</span>: <span class="hljs-string">&quot;success&quot;</span>,<br><span class="hljs-attr">title</span>: <span class="hljs-string">&quot;清除已完成項目成功&quot;</span>,<br>&#125;);<br><span class="hljs-title function_">getTodos</span>();<br>&#125;);<br>&#125;;<br><br><span class="hljs-keyword">return</span> (<br><span class="hljs-comment">// ... 略</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;todo__bottom&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;todo__bottom__text&quot;</span>&gt;</span></span><br><span class="language-xml">&#123;todoUnCompleted.length&#125; 個已完成項目</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;todo__bottom__btn&quot;</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;clearTodoCompleted&#125;</span>&gt;</span></span><br><span class="language-xml">清除已完成項目</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>);<br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="登出"><a href="#登出" class="headerlink" title="登出"></a>登出</h3><p>登出在執行 apiUsersSignOut() 時，記得清理 document.cookie (<code>document.cookie = &quot;token=; expires=;&quot;</code>)</p><p>在登出成功時，會透過 navigate 導回登入頁面</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// todo.jsx</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Swal</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;sweetalert2&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; useNavigate &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-router-dom&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; useState, useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> &#123;<br>apiUsersCheckout,<br>apiGetTodos,<br>apiPostTodos,<br>apiDeleteTodos,<br>apiPatchTodos,<br>apiPutTodos,<br>todoBase,<br>apiUsersSignOut,<br>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../api&quot;</span>;<br><span class="hljs-comment">// ... 略</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">Todo</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br><span class="hljs-comment">// ... 略</span><br><br><span class="hljs-keyword">const</span> navigate = <span class="hljs-title function_">useNavigate</span>();<br><br><span class="hljs-comment">// ... 略</span><br><br><span class="hljs-comment">// 登出</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">signOut</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br><span class="hljs-title function_">apiUsersSignOut</span>()<br>.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> &#123;<br><span class="hljs-variable language_">document</span>.<span class="hljs-property">cookie</span> = <span class="hljs-string">&quot;token=; expires=;&quot;</span>;<br><span class="hljs-title class_">Swal</span>.<span class="hljs-title function_">fire</span>(&#123;<br><span class="hljs-attr">title</span>: <span class="hljs-string">&quot;您已登出&quot;</span>,<br><span class="hljs-attr">text</span>: <span class="hljs-string">&quot;為您導回登入頁面...&quot;</span>,<br><span class="hljs-attr">icon</span>: <span class="hljs-string">&quot;success&quot;</span>,<br><span class="hljs-attr">showConfirmButton</span>: <span class="hljs-literal">false</span>,<br><span class="hljs-attr">timer</span>: <span class="hljs-number">1500</span>,<br>&#125;);<br><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br><span class="hljs-title function_">navigate</span>(<span class="hljs-string">&quot;/&quot;</span>);<br>&#125;, <span class="hljs-number">1500</span>);<br>&#125;)<br>.<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> &#123;<br><span class="hljs-title class_">Swal</span>.<span class="hljs-title function_">fire</span>(&#123;<br><span class="hljs-attr">title</span>: <span class="hljs-string">&quot;登出失敗，請再檢查看看&quot;</span>,<br><span class="hljs-attr">icon</span>: <span class="hljs-string">&quot;error&quot;</span>,<br><span class="hljs-attr">showConfirmButton</span>: <span class="hljs-literal">false</span>,<br><span class="hljs-attr">timer</span>: <span class="hljs-number">1500</span>,<br>&#125;);<br>&#125;);<br>&#125;;<br><br><span class="hljs-keyword">return</span> (<br><span class="hljs-comment">// ... 略</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;greet&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h4</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;greet__text&quot;</span>&gt;</span>Hi~ &#123;nickname&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;greet__btn&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;signOut&#125;</span>&gt;</span></span><br><span class="language-xml">登出</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="hljs-comment">// ... 略</span><br>);<br>&#125;;<br></code></pre></td></tr></table></figure><hr><h2 id="結尾"><a href="#結尾" class="headerlink" title="結尾"></a>結尾</h2><p>透過這幾週跟著作業產出拆解文章，比較有感的部分是<strong>狀況的掌握</strong>，不論正在製作哪個功能，或者正卡關在什麼地方，都比較不會混亂跟一片空白。</p><p>講到一片空白，也來分享自己先前看書所學習到的。基本上來說，即使現在的科技相當發達，我們大腦主要還是以<strong>求生</strong>作為導向，所以當我們面臨太多資訊、思考太多時，大腦會容易處於當機狀態（避免過度耗能）。回想一下學生時期在準備考試時，是不是會突然開始整理房間呢？因為大腦判斷準備考試實在太麻煩（太耗能）了。而依循大腦這樣的特性，再來延伸說到<strong>寫文章</strong>跟<strong>拆解任務</strong>。</p><p>關於<strong>寫文章</strong>這件事，過去我自己也都無法維持住，所以往往寫個一陣子就會放掉；後來在一些探索下，我知道了無法維持的原因，因為會很貪心的在寫文章這件事添加很多資訊（完美主義作祟），像是要寫到什麼程度、別人怎麼看、是否容易理解…等等，可是這樣太多的<strong>想法</strong>、<strong>期待</strong>、<strong>資訊</strong>只會讓大腦很快的當機，初步就無法維持習慣，畢竟阻力實在太大了。</p><p>所以我們可以先<strong>降低門檻</strong>，以自己為出發點：對於什麼議題有興趣、什麼部分之後會用到、想要練習什麼，或者單純分享自己踩到的雷。放掉只是想像的期待，寫的好與壞其實都沒關係，畢竟還在起頭建立習慣。像是我 8 月中做的這個 <a href="https://www.billyji.com/2023/08/14/learn-pinia/">Pinia 筆記</a>，雖然簡簡單單，但沒多久我在寫 Nuxt 專案時就派上用場了。如果嘗試後真的寫不下去也沒關係，也許你是透過大量練習、實戰在組織自己知識的人；也可能是在多些經驗後，發現寫筆記、Blog 對自己的重要性，<strong>It’s all ok</strong>。</p><p>再來討論到<strong>拆解任務</strong>，這也是我操作後相當推薦的方法。剛開始成為前端時，每當新專案一來（或者舊專案要修改），二話不說就是直接打開編輯器開工；不過當工作累積一些經驗後，變成專案一來會先規劃跟拆解，基本上我電腦桌的附近一定會擺上筆記本或紙。而這樣的拆解在專案的進行上會比較順，也是順著大腦的特性走，讓它不會一次進太多資訊而當機。不過在實際專案上，因為有時間上的壓力，無法像上課這樣拆解的比較細，所以可以好好利用上課來嘗試拆解。</p><p>感謝你看到這邊，一不注意就在結尾處提了比較多。若有什麼部分寫錯，也再麻煩跟我說，感恩！</p><p>（感謝 Evan 同學發現待辦 CRUD 沒寫好的部分！）<br>（感謝助教提供優化部分！）</p>]]></content>
    
    
    <categories>
      
      <category>前端</category>
      
    </categories>
    
    
    <tags>
      
      <tag>六角學院</tag>
      
      <tag>React</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>六角學院 React 入門工作坊第三週</title>
    <link href="/post/react-workshop-week3.html"/>
    <url>/post/react-workshop-week3.html</url>
    
    <content type="html"><![CDATA[<p>Photo by <a href="https://unsplash.com/@lautaroandreani?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Lautaro Andreani</a> on <a href="https://unsplash.com/photos/xkBaqlcqeb4?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Unsplash</a></p><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>第三週因為事情比較多，所以整體的進度慢了一些。上課也只能跟到前半段 30 分鐘，覺得曠掉直播課是滿可惜的(QQ)，而且也可能會錯過<del>尿點</del>知識；後來在隔天老師上傳錄影檔時，就趕快補上進度，這週的主軸核心為 API 串接，可以好好做個練習，上課時老師也會補上一些知識點（ex: JWT），並講解的比較好理解。</p><p>這週因為一些規劃跟時間關係，所以會跟前兩週完整拆解的方式不同，這邊抽出三個部分來分享：</p><ul><li>React Hook Form</li><li>Axios 的 API 管理</li><li>關於 API 串接練習</li></ul><p><a href="https://www.billyji.com/react-workshop-week3/">第三週作品</a></p><hr><h2 id="React-Hook-Form"><a href="#React-Hook-Form" class="headerlink" title="React Hook Form"></a>React Hook Form</h2><p>一開始在寫註冊這個元件時，忽然興起了找表單套件的想法，後來就找到了<a href="https://react-hook-form.com/">React Hook Form</a>，也決定在這次作業中來嘗試一下。</p><h3 id="起手安裝"><a href="#起手安裝" class="headerlink" title="起手安裝"></a>起手安裝</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">npm <span class="hljs-keyword">install</span> react-hook-form<br></code></pre></td></tr></table></figure><h3 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h3><ol><li>在元件中透過 <code>import &#123; useForm &#125; from &quot;react-hook-form&quot;</code>，從表單套件引用 useForm 這個功能</li><li>接著從 useForm 的執行中，解構出 register 跟 handleSubmit。（前者處理資料，後者處理表單提交相關）</li><li>再來定義好表單送出的 onSubmit 函式，這是屬於自定義的函式，所以命名也是自定義的。稍後就會提到這個自定義函式的 data 參數。</li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; useForm &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-hook-form&quot;</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">SignUp</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br><span class="hljs-keyword">const</span> &#123;<br>register, <span class="hljs-comment">// state</span><br>handleSubmit, <span class="hljs-comment">// submit</span><br>&#125; = <span class="hljs-title function_">useForm</span>();<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">onSubmit</span> = (<span class="hljs-params">data</span>) =&gt; &#123;<br><span class="hljs-comment">// 自定義的 submit</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);<br>&#125;;<br><br><span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span>...略<span class="hljs-tag">&lt;/&gt;</span></span>;<br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="在-jsx-中使用"><a href="#在-jsx-中使用" class="headerlink" title="在 jsx 中使用"></a>在 jsx 中使用</h3><p>接著我們來看 jsx 樣板部分：</p><ol><li>如稍早所述 register 是處理資料相關，它用來建立表單元素跟資料的關聯。在下方程式碼的三個 input 中，我們都能看到 <code>&#123;...register(&quot;欄位命名&quot;)&#125;</code> 這樣的方式，將 state 登記（綁定）到某個表單元素。</li><li>而在 form tag 的部分，<code>handleSubmit</code> 是處理表單提交的函式，透過這樣 <code>&#123;handleSubmit(onSubmit)&#125;</code> 把我們自定義的函式丟進去，就能在表單送出後，在自定義函式的參數中，得到 <code>register</code> 的資料。</li></ol><p>（爲了方便理解，所以有稍微省略一些程式碼結構）</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">return</span> (<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;signUpPage&quot;</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bg-yellow&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;formControls&quot;</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">&#123;handleSubmit(onSubmit)&#125;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;formControls_txt&quot;</span>&gt;</span>註冊帳號<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">className</span>=<span class="hljs-string">&quot;formControls_input&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">type</span>=<span class="hljs-string">&quot;email&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">id</span>=<span class="hljs-string">&quot;email&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;請輸入 email&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">&#123;<span class="hljs-attr">...register</span>(&quot;<span class="hljs-attr">email</span>&quot;)&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">/&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">className</span>=<span class="hljs-string">&quot;formControls_input&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">id</span>=<span class="hljs-string">&quot;nickname&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;請輸入您的暱稱&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">&#123;<span class="hljs-attr">...register</span>(&quot;<span class="hljs-attr">nickname</span>&quot;)&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">/&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">className</span>=<span class="hljs-string">&quot;formControls_input&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">id</span>=<span class="hljs-string">&quot;password&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;請輸入密碼&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">&#123;<span class="hljs-attr">...register</span>(&quot;<span class="hljs-attr">password</span>&quot;)&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">/&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;formControls_btnSubmit&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span>&gt;</span></span><br><span class="language-xml">註冊帳號</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>);<br></code></pre></td></tr></table></figure><p>補充：<br>從以上範例中，當我們填寫好 input 並送出表單後，就能從自定義函式的 <code>data</code> 參數中取得資料。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 自定義的 submit</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">onSubmit</span> = (<span class="hljs-params">data</span>) =&gt; &#123;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);<br><span class="hljs-comment">// &#123;email: &#x27;我們所填入的 mail&#x27;, nickname: &#x27;填入的 nickname&#x27;, password: &#x27;填入的密碼&#x27;&#125;</span><br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="使用心得"><a href="#使用心得" class="headerlink" title="使用心得"></a>使用心得</h3><p>這週上課時，中途有提到表單處理，雖然 React 在資料處理上有一些固定的模式，但不得不說是比較複雜的（很吃 JS 底子）。</p><p>這次作業的表單是較為單純的（欄位少），所以即使不用這個套件，對於速度跟方便性上也不會差異太多；不過透過這樣的嘗試，可以知道如果是複雜表單（欄位多），就相當適合導入使用，而這個套件也包含了一些方便的功能，像是狀態監聽、錯誤樣式、驗證等等。</p><h2 id="Axios-的-API-管理"><a href="#Axios-的-API-管理" class="headerlink" title="Axios 的 API 管理"></a>Axios 的 API 管理</h2><p>當我們使用 axios 來串接 api 時，可以試著把 api crud 的相關操作都集中在一支 js 檔案管理，需要某個 api 操作時再引用出來，這樣的概念跟優點可以參考 <a href="https://medium.com/i-am-mike/%E4%BD%BF%E7%94%A8axios%E6%99%82%E4%BD%A0%E7%9A%84api%E9%83%BD%E6%80%8E%E9%BA%BC%E7%AE%A1%E7%90%86-557d88365619">Mike 老師的文章</a>。</p><p>自己最早接觸到這樣的概念是幾年前的某次面試，那時跟負責面試的技術主管討論了工作上的專案，以及聊到了在 Vue 直播班做的作品（2020 的直播班），而這位主管在面試快結束時，也給予我一些建議，像是可以鑽研 vue 的底層知識、vue2 到 vue3 的不同，以及 api 抽出來管理（真的很感謝那位技術主管）。雖然這次課程用到的 api 數量不多，所以即使沒有管理也是 OK 的，不過還是借著這樣的機會來做練習。</p><h3 id="抽出-api-程式"><a href="#抽出-api-程式" class="headerlink" title="抽出 api 程式"></a>抽出 api 程式</h3><ol><li>看了 api 操作有哪些之後，從專案根目錄開一個 api folder，並在裡頭新增 index.js</li><li>首先 import axios 到這支檔案中，並透過 axios.create 創建 axios 的實體<ul><li>雖然這次只用到 baseURL，不過還是可以看一下文件的 <a href="https://github.com/axios/axios#request-config">config</a></li></ul></li><li>把 api 的 crud 操作包裝在函式內，並 export 出去。這邊也先根據 api 文件去配置需要的參數，像是 data、id、headers<ul><li>在函式命名上我以 api 做開頭，表示這是處理 api 相關</li></ul></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// api/index.js</span><br><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;axios&quot;</span>;<br><br><span class="hljs-keyword">const</span> todoBase = axios.<span class="hljs-title function_">create</span>(&#123;<br><span class="hljs-attr">baseURL</span>: <span class="hljs-string">&quot;https://...&quot;</span>,<br>&#125;);<br><br><span class="hljs-comment">// 註冊</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">apiUsersSignUp</span> = (<span class="hljs-params">data</span>) =&gt; todoBase.<span class="hljs-title function_">post</span>(<span class="hljs-string">&quot;/users/sign_up&quot;</span>, data);<br><br><span class="hljs-comment">// 登入</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">apiUsersSignIn</span> = (<span class="hljs-params">data</span>) =&gt; todoBase.<span class="hljs-title function_">post</span>(<span class="hljs-string">&quot;/users/sign_in&quot;</span>, data);<br><br><span class="hljs-comment">// 驗證</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">apiUsersCheckout</span> = (<span class="hljs-params">headers</span>) =&gt;<br>todoBase.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;/users/checkout&quot;</span>, headers);<br><br><span class="hljs-comment">// 登出</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">apiUsersSignOut</span> = (<span class="hljs-params">headers</span>) =&gt;<br>todoBase.<span class="hljs-title function_">post</span>(<span class="hljs-string">&quot;/users/sign_out&quot;</span>, &#123;&#125;, headers);<br><br><span class="hljs-comment">// 取得所有待辦</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">apiGetTodos</span> = (<span class="hljs-params">headers</span>) =&gt; todoBase.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;/todos/&quot;</span>, headers);<br><br><span class="hljs-comment">// 新增待辦</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">apiPostTodos</span> = (<span class="hljs-params">data, headers</span>) =&gt;<br>todoBase.<span class="hljs-title function_">post</span>(<span class="hljs-string">&quot;/todos/&quot;</span>, data, headers);<br><br><span class="hljs-comment">// 刪除待辦</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">apiDeleteTodos</span> = (<span class="hljs-params">id, headers</span>) =&gt;<br>todoBase.<span class="hljs-title function_">delete</span>(<span class="hljs-string">`/todos/<span class="hljs-subst">$&#123;id&#125;</span>`</span>, headers);<br><br><span class="hljs-comment">// 切換待辦狀態</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">apiPatchTodos</span> = (<span class="hljs-params">id, headers</span>) =&gt;<br>todoBase.<span class="hljs-title function_">patch</span>(<span class="hljs-string">`/todos/<span class="hljs-subst">$&#123;id&#125;</span>/toggle`</span>, &#123;&#125;, headers);<br><br><span class="hljs-comment">// 編輯待辦文字</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">apiPutTodos</span> = (<span class="hljs-params">id, data, headers</span>) =&gt;<br>todoBase.<span class="hljs-title function_">put</span>(<span class="hljs-string">`/todos/<span class="hljs-subst">$&#123;id&#125;</span>`</span>, data, headers);<br></code></pre></td></tr></table></figure><h3 id="引用-1"><a href="#引用-1" class="headerlink" title="引用"></a>引用</h3><p>再來以新增項目跟刪除項目來做個範例：</p><ol><li>首先從 api&#x2F;index.js 引用我們需要的 api 函式，這個範例是新增跟刪除項目的函式</li><li>新增項目：在 addTodo 中去使用 apiPostTodos 這個操作，並帶上需要的 data(input value) 跟 headers(token)。後面一樣可接上 .then().catch()</li><li>刪除項目：在 deleteTodo 中去使用 apiDeleteTodos 這個操作，並帶上需要的 id(要刪除哪一筆) 跟 headers</li></ol><p>（範例中為了說明主要內容，所以會省略較多程式碼）</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// Todo.jsx</span><br><span class="hljs-comment">// ...略</span><br><span class="hljs-keyword">import</span> &#123; apiPostTodos, apiDeleteTodos &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../api&quot;</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">Todo</span> = (<span class="hljs-params">&#123; todoToken &#125;</span>) =&gt; &#123;<br><span class="hljs-comment">// ...略</span><br><span class="hljs-keyword">const</span> [input, setInput] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;&quot;</span>);<br><br><span class="hljs-keyword">const</span> headers = &#123;<br><span class="hljs-title class_">Authorization</span>: todoToken,<br>&#125;;<br><br><span class="hljs-comment">// ...略</span><br><br><span class="hljs-comment">// 新增項目</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">addTodo</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br><span class="hljs-keyword">if</span> (input === <span class="hljs-string">&quot;&quot;</span>) <span class="hljs-keyword">return</span>;<br><span class="hljs-title function_">apiPostTodos</span>(&#123; <span class="hljs-attr">content</span>: input &#125;, &#123; headers &#125;).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res);<br>&#125;);<br><br><span class="hljs-title function_">setInput</span>(<span class="hljs-string">&quot;&quot;</span>); <span class="hljs-comment">// 清空</span><br><span class="hljs-title function_">getTodos</span>();<br>&#125;;<br><br><span class="hljs-comment">// 刪除項目</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">deleteTodo</span> = (<span class="hljs-params">id</span>) =&gt; &#123;<br><span class="hljs-title function_">apiDeleteTodos</span>(id, &#123; headers &#125;);<br><span class="hljs-title function_">getTodos</span>();<br>&#125;;<br><span class="hljs-comment">// ... 略</span><br>&#125;;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Todo</span>;<br></code></pre></td></tr></table></figure><h3 id="題外話跟補充"><a href="#題外話跟補充" class="headerlink" title="題外話跟補充"></a>題外話跟補充</h3><p>雖然知道 Async&#x2F;Await 這個寫法在視覺上比較好讀，但不曉得為何自己一直都很習慣用 .then().catch() 的形式。<br>補充：如果不是用 axios 來串接 api，也是可以做到管理的，不過要自己多寫些程式封裝。</p><h2 id="關於-API-串接練習"><a href="#關於-API-串接練習" class="headerlink" title="關於 API 串接練習"></a>關於 API 串接練習</h2><p>在寫這篇文的過程中，也看到老師在公告中，建議同學盡量練習課程所提供的 API。我覺得這樣的練習相當重要，除了 AJAX 是前端的必須技能外，我也想分享這幾年在前端工作的心得。</p><p>前端工程師的職務內容，在不同公司跟產業中是差異很大的，再加上團隊氛圍等多種因素的影響。有的公司很重視切版、畫面，有的則很注重程式，有些時候也會被指派一些跟前端無關的任務。以我自己上一份工作經驗來說，大約有 10% 到 20% 的時間會做非程式任務，20% 的時間會處理一些後端部分（例如將表單資料送入資料庫），而剩下的部分才回到前端領域。（補充：這個段落不是抱怨，而是接受每個公司對前端需求是不同的，主要是當事者能否接受）</p><p>由於公司的類型多樣，比如團隊是否有前後端分離，或者專案的時辰充裕與否，再加總一些其他因素等等，我們不一定能在工作上串接到後端提供的 API，再來是不一定會有這麼詳盡的文件（<del>甚至沒有文件</del>）。所以如第一個段落所述，會覺得這樣的練習是很重要。<br>（當然也有一些第三方服務是可以串接練習的）</p><hr><h2 id="結尾"><a href="#結尾" class="headerlink" title="結尾"></a>結尾</h2><p>第三週作業如果寫的較為完整，就可以好好來銜接最終作業了。不曉得為何，這週寫作業時，腦袋會比較頻繁的當機，所以都要提醒自己起來動一動，做點不同的事情。</p><p>最近回來寫程式的過程（<del>復健</del>），一直能感覺到過去累積不少技術債，這陣子先專心在規劃好的任務上，之後再來還債了（例如：JS 核心）。</p><p>（若有什麼部分寫錯，也再麻煩跟我說，感恩！）</p>]]></content>
    
    
    <categories>
      
      <category>前端</category>
      
    </categories>
    
    
    <tags>
      
      <tag>六角學院</tag>
      
      <tag>React</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>在 Nuxt3 使用 Bootstrap5</title>
    <link href="/post/nuxt3-install-bootstrap5.html"/>
    <url>/post/nuxt3-install-bootstrap5.html</url>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>近期正在練習把 Vue2 的舊專案翻成 Nuxt3，因為過去這個專案是使用 Bootstrap4，想說就順道升上 Bootstrap5。不過 Nuxt3 跟 Bootstrap5 並沒有一個整合好的套件（例如：BootstrapVue），所以在引用上就會多一些設置。</p><p>（一開始在考慮 Nuxt3 的套件整合上，本來是有考慮翻到 Tailwind，不過考慮到重切時間跟專注度，決定還是先專心熟悉 Nuxt3）</p><hr><h2 id="設置部分"><a href="#設置部分" class="headerlink" title="設置部分"></a>設置部分</h2><h3 id="CDN-配置"><a href="#CDN-配置" class="headerlink" title="CDN 配置"></a>CDN 配置</h3><p>這邊先提一個最簡易的配置，如果只是做個 Demo，沒有要使用到客製化，那麽就可以在 nuxt.config.ts 直接引入 CDN 使用。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// nuxt.config.ts</span><br><span class="hljs-keyword">import</span> &#123; defineNuxtConfig &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;nuxt&quot;</span>;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineNuxtConfig</span>(&#123;<br><span class="hljs-attr">app</span>: &#123;<br><span class="hljs-attr">head</span>: &#123;<br><span class="hljs-attr">link</span>: [<br>&#123;<br><span class="hljs-attr">rel</span>: <span class="hljs-string">&quot;stylesheet&quot;</span>,<br><span class="hljs-attr">href</span>: <span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css&quot;</span>,<br><span class="hljs-attr">integrity</span>:<br><span class="hljs-string">&quot;sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU&quot;</span>,<br><span class="hljs-attr">crossorigin</span>: <span class="hljs-string">&quot;anonymous&quot;</span>,<br>&#125;,<br>],<br><span class="hljs-attr">script</span>: [<br>&#123;<br><span class="hljs-attr">src</span>: <span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js&quot;</span>,<br><span class="hljs-attr">integrity</span>:<br><span class="hljs-string">&quot;sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ&quot;</span>,<br><span class="hljs-attr">crossorigin</span>: <span class="hljs-string">&quot;anonymous&quot;</span>,<br>&#125;,<br>],<br>&#125;,<br>&#125;,<br>&#125;);<br></code></pre></td></tr></table></figure><h3 id="安裝"><a href="#安裝" class="headerlink" title="安裝"></a>安裝</h3><p>先在專案的終端機中，輸入以下 <code>npm install bootstrap @popperjs/core</code>。Popper.js 是跟一些 Bootstrap5 效果如 popper、tooltip 有關。</p><h3 id="css-設置"><a href="#css-設置" class="headerlink" title="css 設置"></a>css 設置</h3><p>我們可以在 nuxt.config.ts 的設置中，直接引入 bootstrap.scss，當然這樣就無法去客製；</p><p>這邊是在 assets 創建一個 main.scss，然後 <code>@import &quot;./variables&quot;;</code> 這個部分是從 node_module bootstrap 複製過來的，這樣就可以去客製一些 bootstrap 變數（例如：顏色、距離等等）。然後也能帶上自己要寫的 scss。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// nuxt.config.ts</span><br><span class="hljs-keyword">import</span> &#123; defineNuxtConfig &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;nuxt&quot;</span>;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineNuxtConfig</span>(&#123;<br><span class="hljs-attr">css</span>: [<br><span class="hljs-comment">// &#x27;bootstrap/scss/bootstrap.scss&#x27;,</span><br><span class="hljs-string">&quot;@/assets/styles/main.scss&quot;</span>,<br>],<br>&#125;);<br></code></pre></td></tr></table></figure><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-comment">// main.scss</span><br><span class="hljs-keyword">@import</span> <span class="hljs-string">&quot;bootstrap/scss/functions&quot;</span>;<br><span class="hljs-keyword">@import</span> <span class="hljs-string">&quot;./variables&quot;</span>;<br><span class="hljs-keyword">@import</span> <span class="hljs-string">&quot;bootstrap/scss/bootstrap&quot;</span>;<br><br><span class="hljs-keyword">@import</span> <span class="hljs-string">&quot;./common&quot;</span>;<br><span class="hljs-keyword">@import</span> <span class="hljs-string">&quot;./page/prod&quot;</span>;<br><span class="hljs-keyword">@import</span> <span class="hljs-string">&quot;./page/home&quot;</span>;<br><span class="hljs-comment">// ... 略</span><br></code></pre></td></tr></table></figure><h3 id="JS-的設置"><a href="#JS-的設置" class="headerlink" title="JS 的設置"></a>JS 的設置</h3><p>在 Nuxt 專案的根目錄中，創建 plugins 的資料夾，並且新建一支 JS 檔案，這邊範例是用 useBootstrap.client.js 作為命名。</p><p>接下來把 node_module 中的 bootstrap.bundle.js 給引用進來，接著 <code>nuxtApp.provide(&quot;bootstrap&quot;, bootstrap)</code> 將 bootstrap.bundle.js 的功能引用到 Nuxt 中。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// useBootstrap.client.js</span><br><span class="hljs-keyword">import</span> bootstrap <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;bootstrap/dist/js/bootstrap.bundle&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineNuxtPlugin</span>(<span class="hljs-function">(<span class="hljs-params">nuxtApp</span>) =&gt;</span> &#123;<br>nuxtApp.<span class="hljs-title function_">provide</span>(<span class="hljs-string">&quot;bootstrap&quot;</span>, bootstrap);<br>&#125;);<br></code></pre></td></tr></table></figure><p>接著我們可以透過 <code>const &#123; $bootstrap &#125; = useNuxtApp()</code> 來使用 bootstrap js，記得要加上 $ 符號。<br>以下範例示意，當去打 api 拿回資料後，才去觸發 Modal：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-comment">// bootstrap js</span></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> &#123; $bootstrap &#125; = <span class="hljs-title function_">useNuxtApp</span>();</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-comment">// ... 其他程式略</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">$fetch(api, &#123;</span><br><span class="language-javascript"><span class="hljs-attr">method</span>: <span class="hljs-string">&quot;GET&quot;</span>,</span><br><span class="language-javascript"><span class="hljs-attr">headers</span>: headers,</span><br><span class="language-javascript">&#125;).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> &#123; data &#125; = res;</span><br><span class="language-javascript"><span class="hljs-comment">// ... 略</span></span><br><span class="language-javascript">productModalHandle.<span class="hljs-title function_">show</span>();</span><br><span class="language-javascript">&#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">productModalHandle = <span class="hljs-keyword">new</span> $bootstrap.<span class="hljs-title class_">Modal</span>(productModal.<span class="hljs-property">value</span>, &#123;&#125;); <span class="hljs-comment">// 記得綁上 ref</span></span><br><span class="language-javascript">delProductModalHandle = <span class="hljs-keyword">new</span> $bootstrap.<span class="hljs-title class_">Modal</span>(delProductModal.<span class="hljs-property">value</span>, &#123;&#125;);</span><br><span class="language-javascript">&#125;);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><hr><h2 id="結尾"><a href="#結尾" class="headerlink" title="結尾"></a>結尾</h2><p>以上是參考這篇 <a href="https://stackoverflow.com/questions/71795143/how-to-use-bootstrap5-with-vite-and-nuxt3">stackoverflow</a>，並做個延伸。</p><p>如果有遇到 sass 的 abs 警告，則可以試著把 sass 的版本降低。</p>]]></content>
    
    
    <categories>
      
      <category>前端</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Nuxt3</tag>
      
      <tag>Bootstrap5</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>六角學院 React 入門工作坊第二週</title>
    <link href="/post/react-workshop-week2.html"/>
    <url>/post/react-workshop-week2.html</url>
    
    <content type="html"><![CDATA[<p>Photo by <a href="https://unsplash.com/@lautaroandreani?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Lautaro Andreani</a> on <a href="https://unsplash.com/photos/xkBaqlcqeb4?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Unsplash</a></p><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>本週心得小提：<br>課程除了可以學習到 React 操作，還可以從老師怎麼拆解問題，以及同學的程式碼中（有些同學感覺是有經驗的開發者），去看到不同的思路，擴展出解決問題的眼界。</p><p>記得這週課程快結尾時，老師有提到工程師的差異，厲害的工程師是會把複雜轉為簡單，以清楚的方式撰寫程式碼（<del>取代很潮、炫技</del>），聽到這個段落，覺得特別有感。</p><p><a href="https://www.billyji.com/react-workshop-week2/">第二週作品</a></p><p>大致的流程為：</p><ol><li>思考資料與切版（練習 Tailwind）</li><li>程式邏輯撰寫</li><li>拆元件</li></ol><hr><h2 id="思考資料與切版（練習-Tailwind）"><a href="#思考資料與切版（練習-Tailwind）" class="headerlink" title="思考資料與切版（練習 Tailwind）"></a>思考資料與切版（練習 Tailwind）</h2><p>在開始動工之前，先來初步釐清會有什麼資料（功能）：</p><ul><li><p>菜單資料</p><ul><li><code>const [menu] = useState(data)</code>，放進 data 初始資料</li><li>根據菜單的點擊，會帶 id、品項、描述、單價等等資料到購物車</li><li>同一品項重覆點選時（該品項已經存在購物車），則在購物車資料中，將該品項數量 + 1</li></ul></li><li><p>購物車資料</p><ul><li><code>const [cart, setCart] = useState([])</code>，初始購物車為空 Array</li><li>除了菜單帶過來的資料外，也要多定義數量 <code>qty</code> 跟小計（數量*價錢）</li><li>刪除品項跟更新品項數量的功能</li><li>定義購物價錢總計 <code>const [sum, setSum] = useState(0)</code></li><li>備註 <code>const [note, setNote] = useState(&quot;&quot;)</code>;</li><li>點擊送出訂單時，會帶購物車資料到訂單</li></ul></li><li><p>訂單資料：</p><ul><li><code>const [order, setOrder] = useState([])</code>，初始為空 Array</li><li>除了從購物車帶過來的資料，也多定義一個 id</li></ul></li></ul><p>切版：<br>因為先前的工作內容，所以較常在手刻畫面；不過近期回來接觸前端後，有時候反而會思考，有沒有什麼方式可以減少切版的時間（<del>可能是開始想懶惰了?</del>）。記得幾個月前還有看到一個付費的功能，是把 figma 的設計圖，轉換成 react 的程式碼。<br>藉由這樣的實作機會跟想法，決定嘗試使用 Tailwind，記得 JIT 模式剛出時有稍微接觸過。本來預期習慣 Tailwind 不會花太多時間，不過實際上還是花了不少時間。<del>（也有去找人家寫好的 UI 來改）</del></p><h2 id="程式邏輯撰寫"><a href="#程式邏輯撰寫" class="headerlink" title="程式邏輯撰寫"></a>程式邏輯撰寫</h2><p>因為切版後的程式行數沒有很多(2xx)，所以就沒有先拆元件。</p><h3 id="將-menu-定義到畫面上"><a href="#將-menu-定義到畫面上" class="headerlink" title="將 menu 定義到畫面上"></a>將 menu 定義到畫面上</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br><span class="hljs-keyword">const</span> [menu] = <span class="hljs-title function_">useState</span>(data); <span class="hljs-comment">// 原始 menu</span><br><br><span class="hljs-keyword">return</span> (<br><span class="hljs-comment">// ...略</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;flex flex-wrap -mx-3&quot;</span>&gt;</span></span><br><span class="language-xml">&#123;menu.map((item) =&gt; &#123;</span><br><span class="language-xml">return (</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;item.id&#125;</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;md:w-1/2 w-full px-3 pb-6&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;rounded-lg border-2 p-3 cursor-pointer border-brown-light hover:bg-brown-100&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;text-xl text-brown font-medium&quot;</span>&gt;</span></span><br><span class="language-xml">&#123;item.name&#125; <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>$&#123;item.price&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;mt-1 text-md text-brown&quot;</span>&gt;</span>&#123;item.description&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">);</span><br><span class="language-xml">&#125;)&#125;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="hljs-comment">// ...略</span><br>);<br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="選擇飲品點擊時，將資料帶入購物車"><a href="#選擇飲品點擊時，將資料帶入購物車" class="headerlink" title="選擇飲品點擊時，將資料帶入購物車"></a>選擇飲品點擊時，將資料帶入購物車</h3><ul><li>購物車資料預設為 []</li><li>在選擇飲品的 List，新增 onClick 事件觸發 addCart，並在參數中帶上資料 (menu item)</li><li>在 addCart function 做一個 tempCart 的新陣列，並多帶上預設數量 qty</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br><span class="hljs-keyword">const</span> [menu] = <span class="hljs-title function_">useState</span>(data); <span class="hljs-comment">// 原始 menu</span><br><span class="hljs-keyword">const</span> [cart, setCart] = <span class="hljs-title function_">useState</span>([]); <span class="hljs-comment">// 購物車資料</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">addCart</span> = (<span class="hljs-params">item</span>) =&gt; &#123;<br><span class="hljs-keyword">const</span> tempCart = [<br>...cart, <span class="hljs-comment">// [] 淺拷貝</span><br>&#123;<br>...item,<br><span class="hljs-attr">qty</span>: <span class="hljs-number">1</span>, <span class="hljs-comment">// 數量預設為 1</span><br>&#125;,<br>];<br><span class="hljs-title function_">setCart</span>(tempCart);<br>&#125;;<br><br><span class="hljs-keyword">return</span> (<br><span class="hljs-comment">// ...略</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;flex flex-wrap -mx-3&quot;</span>&gt;</span></span><br><span class="language-xml">&#123;menu.map((item) =&gt; &#123;</span><br><span class="language-xml">return (</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">key</span>=<span class="hljs-string">&#123;item.id&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">className</span>=<span class="hljs-string">&quot;md:w-1/2 w-full px-3 pb-6&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> addCart(item)&#125;</span><br><span class="language-xml">&gt;</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;rounded-lg border-2 p-3 cursor-pointer border-brown-light hover:bg-brown-100&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;text-xl text-brown font-medium&quot;</span>&gt;</span></span><br><span class="language-xml">&#123;item.name&#125; <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>$&#123;item.price&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;mt-1 text-md text-brown&quot;</span>&gt;</span>&#123;item.description&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">);</span><br><span class="language-xml">&#125;)&#125;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="hljs-comment">// ... 略</span><br>);<br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="購物車資料定義到畫面"><a href="#購物車資料定義到畫面" class="headerlink" title="購物車資料定義到畫面"></a>購物車資料定義到畫面</h3><p>當我們可以透過點擊飲品，把飲品項目加到購物車，接著把購物車資料定義到畫面中。<br>（可以透過 <a href="https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=zh-TW">React Developer Tools</a> 工具來看資料）</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br><span class="hljs-keyword">const</span> [menu] = <span class="hljs-title function_">useState</span>(data); <span class="hljs-comment">// 原始 menu</span><br><span class="hljs-keyword">const</span> [cart, setCart] = <span class="hljs-title function_">useState</span>([]); <span class="hljs-comment">// 購物車資料</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">addCart</span> = (<span class="hljs-params">item</span>) =&gt; &#123;<br><span class="hljs-keyword">const</span> tempCart = [<br>...cart, <span class="hljs-comment">// [] 淺拷貝</span><br>&#123;<br>...item,<br><span class="hljs-attr">qty</span>: <span class="hljs-number">1</span>, <span class="hljs-comment">// 數量預設為 1</span><br>&#125;,<br>];<br><span class="hljs-title function_">setCart</span>(tempCart);<br>&#125;;<br><br><span class="hljs-keyword">return</span> (<br><span class="hljs-comment">// ...略</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span></span><br><span class="language-xml">&#123;cart.map((item) =&gt; &#123;</span><br><span class="language-xml">return (</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;item.id&#125;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;p-3 border-b border-dashed border-brown-light&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;text-xl text-brown font-medium&quot;</span>&gt;</span>&#123;item.name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;mt-1 text-md text-brown&quot;</span>&gt;</span>&#123;item.description&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;mt-2 text-red-400 text-sm&quot;</span>&gt;</span></span><br><span class="language-xml">刪除品項</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;p-3 border-b border-dashed border-brown-light text-center text-md text-brown w-32&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">name</span>=<span class="hljs-string">&quot;&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">id</span>=<span class="hljs-string">&quot;&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">className</span>=<span class="hljs-string">&quot;w-1/2 h-[32px] rounded-md text-center bg-brown-100 focus:outline-none focus:border-brown-dark&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">value</span>=<span class="hljs-string">&#123;item.qty&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">&gt;</span></span><br><span class="language-xml">&#123;[...Array(10).keys()].map((item) =&gt; &#123;</span><br><span class="language-xml">return (</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;item</span> + <span class="hljs-attr">1</span>&#125; <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;item&#125;</span>&gt;</span></span><br><span class="language-xml">&#123;item + 1&#125;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">);</span><br><span class="language-xml">&#125;)&#125;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;p-3 border-b border-dashed border-brown-light text-center text-md text-brown&quot;</span>&gt;</span></span><br><span class="language-xml">&#123;item.price&#125;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;p-3 border-b border-dashed border-brown-light text-center text-md text-brown&quot;</span>&gt;</span></span><br><span class="language-xml">&#123;item.price * item.qty&#125;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span></span><br><span class="language-xml">);</span><br><span class="language-xml">&#125;)&#125;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span></span><br>);<br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="判斷購物車是否為空"><a href="#判斷購物車是否為空" class="headerlink" title="判斷購物車是否為空"></a>判斷購物車是否為空</h3><p>以 <code>cart.length === 0</code> 來判斷要顯示的畫面</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&#123; cart.<span class="hljs-property">length</span> === <span class="hljs-number">0</span><br>  ? (<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;rounded-lg border-2 border-brown-light mt-4 p-4 text-center text-brown font-bold&quot;</span>&gt;</span></span><br><span class="language-xml">    尚未選擇飲品～</span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  ) : (<br>    <span class="hljs-comment">// ... 略</span><br>    &#123;cart.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">return</span> (<br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;item.id&#125;</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;p-3 border-b border-dashed border-brown-light&quot;</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;text-xl text-brown font-medium&quot;</span>&gt;</span></span><br><span class="language-xml">              &#123;item.name&#125;</span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;mt-1 text-md text-brown&quot;</span>&gt;</span></span><br><span class="language-xml">              &#123;item.description&#125;</span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">              <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">              <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;mt-2 text-red-400 text-sm&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">            &gt;</span></span><br><span class="language-xml">              刪除品項</span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="language-xml">          // ... 略</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span></span><br>      );<br>    &#125;)&#125;<br>  )<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="重覆點選飲品的判斷"><a href="#重覆點選飲品的判斷" class="headerlink" title="重覆點選飲品的判斷"></a>重覆點選飲品的判斷</h3><p>當我們點擊飲品，觸發飲品項目加到購物車時，還需判斷購物車中是否已經有此飲品品項，所以會以 id 作為判斷依據。</p><p>程式上先以 <code>const conformIndex = cart.findIndex((cartItem) =&gt; item.id === cartItem.id);</code> 來做判斷，對比飲品品項的 id 跟購物車 id。 (-1 表示購物車還沒有這個品項)</p><p>購物車沒有此品項時，就跑原本的新增程式；如果已經有此品項，就跑編輯的程式，編輯的寫法跟上週是一樣的，這邊就不再贅述。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">addCart</span> = (<span class="hljs-params">item</span>) =&gt; &#123;<br><span class="hljs-keyword">const</span> conformIndex = cart.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function">(<span class="hljs-params">cartItem</span>) =&gt;</span> item.<span class="hljs-property">id</span> === cartItem.<span class="hljs-property">id</span>);<br><br><span class="hljs-keyword">if</span> (conformIndex === -<span class="hljs-number">1</span>) &#123;<br><span class="hljs-comment">// -1 表示購物車還沒有這個品項</span><br><span class="hljs-keyword">const</span> tempCart = [<br>...cart, <span class="hljs-comment">// [] 淺拷貝</span><br>&#123;<br>...item,<br><span class="hljs-attr">qty</span>: <span class="hljs-number">1</span>, <span class="hljs-comment">// 數量預設為 1</span><br>&#125;,<br>];<br><span class="hljs-title function_">setCart</span>(tempCart);<br>&#125; <span class="hljs-keyword">else</span> &#123;<br><span class="hljs-comment">// 購物車原先就有此品項</span><br><span class="hljs-keyword">const</span> tempCart = cart.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">cartItem</span>) =&gt;</span> &#123;<br><span class="hljs-keyword">return</span> item.<span class="hljs-property">id</span> === cartItem.<span class="hljs-property">id</span><br>? &#123;<br>...cartItem,<br><span class="hljs-attr">qty</span>: cartItem.<span class="hljs-property">qty</span> &lt; <span class="hljs-number">10</span> ? cartItem.<span class="hljs-property">qty</span> + <span class="hljs-number">1</span> : cartItem.<span class="hljs-property">qty</span>,<br>  &#125;<br>: &#123; ...cartItem &#125;;<br>&#125;);<br><span class="hljs-title function_">setCart</span>(tempCart);<br>&#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="購物車總計"><a href="#購物車總計" class="headerlink" title="購物車總計"></a>購物車總計</h3><p>先定義 <code>const [total, setTotal] = useState(0);</code> 總計資料，然後透過 useEffect 來觀察購物車是否有更動，只要更動就透過 reduce 重新計算總價。<br>（這邊就省略把 total 放到畫面上）</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br><span class="hljs-keyword">const</span> [menu] = <span class="hljs-title function_">useState</span>(data); <span class="hljs-comment">// 原始 menu</span><br><span class="hljs-keyword">const</span> [cart, setCart] = <span class="hljs-title function_">useState</span>([]); <span class="hljs-comment">// 購物車資料</span><br><span class="hljs-keyword">const</span> [total, setTotal] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>); <span class="hljs-comment">// 總計</span><br><br>  <span class="hljs-comment">// ... 略</span><br>  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br><span class="hljs-keyword">const</span> totalPrice = cart.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">prev, curr</span>) =&gt;</span> &#123;<br><span class="hljs-keyword">return</span> prev + curr.<span class="hljs-property">price</span> * curr.<span class="hljs-property">qty</span>;<br>&#125;, <span class="hljs-number">0</span>);<br><span class="hljs-title function_">setTotal</span>(totalPrice);<br>&#125;, [cart]);<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="hljs-comment">//...略</span><br>  )<br><br></code></pre></td></tr></table></figure><h3 id="購物車品項更改數量-select"><a href="#購物車品項更改數量-select" class="headerlink" title="購物車品項更改數量 (select)"></a>購物車品項更改數量 (select)</h3><p>如果我們在 select 綁上 value ，但並沒有綁上 onChange 的功能時，雖然程式並不會整個爆掉，但會噴紅字加上不能操作 select。</p><p>所以在這邊加上 updateCart 的功能，記得帶上 <code>e.target.value</code>。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br><span class="hljs-keyword">const</span> [menu] = <span class="hljs-title function_">useState</span>(data); <span class="hljs-comment">// 原始 menu</span><br><span class="hljs-keyword">const</span> [cart, setCart] = <span class="hljs-title function_">useState</span>([]); <span class="hljs-comment">// 購物車資料</span><br><span class="hljs-keyword">const</span> [total, setTotal] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>); <span class="hljs-comment">// 總計</span><br><br><span class="hljs-comment">// ... 略</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">updateCart</span> = (<span class="hljs-params">item, value</span>) =&gt; &#123;<br><span class="hljs-keyword">const</span> tempCart = cart.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">cartItem</span>) =&gt;</span> &#123;<br><span class="hljs-keyword">return</span> item.<span class="hljs-property">id</span> === cartItem.<span class="hljs-property">id</span><br>? &#123;<br>...cartItem,<br><span class="hljs-attr">qty</span>: <span class="hljs-title class_">Number</span>(value),<br>  &#125;<br>: &#123; ...cartItem &#125;;<br>&#125;);<br><span class="hljs-title function_">setCart</span>(tempCart);<br>&#125;;<br><br><span class="hljs-keyword">return</span> (<br><span class="hljs-comment">// ... 略</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;p-3 border-b border-dashed border-brown-light text-center text-md text-brown w-32&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">name</span>=<span class="hljs-string">&quot;&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">id</span>=<span class="hljs-string">&quot;&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">className</span>=<span class="hljs-string">&quot;w-1/2 h-[32px] rounded-md text-center bg-brown-100 focus:outline-none focus:border-brown-dark&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">value</span>=<span class="hljs-string">&#123;item.qty&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;(e)</span> =&gt;</span> updateCart(item, e.target.value)&#125;</span><br><span class="language-xml">&gt;</span><br><span class="language-xml">&#123;[...Array(10).keys()].map((item) =&gt; &#123;</span><br><span class="language-xml">return (</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;item</span> + <span class="hljs-attr">1</span>&#125; <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;item&#125;</span>&gt;</span></span><br><span class="language-xml">&#123;item + 1&#125;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">);</span><br><span class="language-xml">&#125;)&#125;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="hljs-comment">// ...略</span><br>);<br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="刪除購物車品項"><a href="#刪除購物車品項" class="headerlink" title="刪除購物車品項"></a>刪除購物車品項</h3><p>那時上課時，看到用 filter 來處理刪除功能，還是會有點反應不上來，雖然並不是第一次看到這樣操作。</p><p>筆記：<code>item.id === cartItem.id</code> 表示符合條件的只有一筆；所以反過來寫的話，就是除了這一筆之外的資料都要留著。<br>（畫面略)</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">deleteCartItem</span> = (<span class="hljs-params">item</span>) =&gt; &#123;<br><span class="hljs-keyword">const</span> tempCart = cart.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">cartItem</span>) =&gt;</span> &#123;<br><span class="hljs-keyword">return</span> item.<span class="hljs-property">id</span> !== cartItem.<span class="hljs-property">id</span>;<br>&#125;);<br><span class="hljs-title function_">setCart</span>(tempCart);<br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="創建訂單"><a href="#創建訂單" class="headerlink" title="創建訂單"></a>創建訂單</h3><p>當我們點擊購物列表的送出按鈕後，會去觸發 createOder function。</p><ul><li>定義資料 <code>const [order, setOrder] = useState([]);</code></li><li>在 tempOrder 這個 array 中，除了帶上購物車、備註、總計的資料外，也多定義一個 id</li><li>最後記得清空購物車跟備註資料</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br><span class="hljs-keyword">const</span> [menu] = <span class="hljs-title function_">useState</span>(data); <span class="hljs-comment">// 原始 menu</span><br><span class="hljs-keyword">const</span> [cart, setCart] = <span class="hljs-title function_">useState</span>([]); <span class="hljs-comment">// 購物車資料</span><br><span class="hljs-keyword">const</span> [total, setTotal] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>); <span class="hljs-comment">// 總計</span><br><span class="hljs-keyword">const</span> [note, setNote] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;&quot;</span>); <span class="hljs-comment">// 備註</span><br><span class="hljs-keyword">const</span> [order, setOrder] = <span class="hljs-title function_">useState</span>([]); <span class="hljs-comment">// 訂單</span><br><br><span class="hljs-comment">// ... 略</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">createOder</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br><span class="hljs-keyword">const</span> tempOrder = [<br>...order,<br>&#123;<br><span class="hljs-attr">id</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>(),<br>cart,<br>note,<br>total,<br>&#125;,<br>];<br><br><span class="hljs-title function_">setOrder</span>(tempOrder);<br><span class="hljs-title function_">setCart</span>([]);<br><span class="hljs-title function_">setNote</span>(<span class="hljs-string">&quot;&quot;</span>);<br>&#125;;<br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="定義訂單到畫面"><a href="#定義訂單到畫面" class="headerlink" title="定義訂單到畫面"></a>定義訂單到畫面</h3><p>先用 <code>order.length === 0</code> 判斷要顯示什麼畫面。接著把資料帶到畫面中。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;div className=<span class="hljs-string">&quot;mx-auto lg:w-3/5 w-full&quot;</span>&gt;<br>&#123;<span class="hljs-comment">/* 訂單  */</span>&#125;<br>&#123;order.<span class="hljs-property">length</span> === <span class="hljs-number">0</span> ? (<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;rounded-lg border-2 border-brown-light mt-4 p-4 text-center text-brown font-bold&quot;</span>&gt;</span></span><br><span class="language-xml">尚未建立訂單～</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>) : (<br>order.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> &#123;<br><span class="hljs-keyword">return</span> (<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">className</span>=<span class="hljs-string">&quot;rounded-lg border-2 border-brown-light mt-4 p-4 text-brown text-center&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">key</span>=<span class="hljs-string">&#123;item.id&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;text-2xl font-bold text-primary text-left&quot;</span>&gt;</span>訂單<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;mt-1 text-md text-brown text-left&quot;</span>&gt;</span>編號：&#123;item.id&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;mt-1 text-md text-brown text-left&quot;</span>&gt;</span>備註：&#123;item.note&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;mt-2 mb-4&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;w-full&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">thead</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;border-b-2 border-brown-light&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">th</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;p-3 font-medium text-brown&quot;</span>&gt;</span>品項<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">th</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;p-3 font-medium text-brown&quot;</span>&gt;</span>數量<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">th</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;p-3 font-medium text-brown&quot;</span>&gt;</span>小計<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">thead</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">tbody</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span></span><br><span class="language-xml">&#123;item.cart.map((innerItem) =&gt; &#123;</span><br><span class="language-xml">return (</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">tr</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">key</span>=<span class="hljs-string">&#123;innerItem.id&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">className</span>=<span class="hljs-string">&quot;border-b border-brown-light&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;p-3 text-brown&quot;</span>&gt;</span>&#123;innerItem.name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;p-3 text-brown&quot;</span>&gt;</span>&#123;innerItem.qty&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;p-3 text-brown&quot;</span>&gt;</span></span><br><span class="language-xml">&#123;innerItem.qty * innerItem.price&#125;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span></span><br><span class="language-xml">);</span><br><span class="language-xml">&#125;)&#125;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">tfoot</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">colSpan</span>=<span class="hljs-string">&quot;2&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">colSpan</span>=<span class="hljs-string">&quot;1&quot;</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;p-3&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;text-center text-xl text-brown font-medium&quot;</span>&gt;</span></span><br><span class="language-xml">總計: $&#123;item.total&#125;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">tfoot</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>);<br>&#125;)<br>)&#125;<br>&lt;/div&gt;<br></code></pre></td></tr></table></figure><h2 id="拆元件"><a href="#拆元件" class="headerlink" title="拆元件"></a>拆元件</h2><p>處理好程式邏輯後，再來就是拆元件的部分，這邊就先拆出最基準的三個（Menu、Cart、Order）。</p><p>在拆元件之前，因為 ESLint 會提醒 props 的型別宣告，所以要先安裝 <a href="https://www.npmjs.com/package/prop-types">prop-types</a>。</p><h3 id="以-Cart-為範例"><a href="#以-Cart-為範例" class="headerlink" title="以 Cart 為範例"></a>以 Cart 為範例</h3><p>這邊就以購物車的元件作為主要範例，其他元件拆法都是一致的。首先我們先在 src 新增 components 資料夾，並新增元件(Cart.jsx)。</p><p>接著在 Cart.jsx 先建好預設，並 import propTypes 以及預設 propTypes 物件：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// Cart.jsx</span><br><span class="hljs-keyword">import</span> propTypes <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;prop-types&quot;</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">Cart</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">return</span> ()<br>&#125;<br><br><span class="hljs-title class_">Cart</span>.<span class="hljs-property">propTypes</span> = &#123;<br><br>&#125;;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Cart</span>;<br></code></pre></td></tr></table></figure><p>將 App.jsx 中的購物車內容，移動到 Cart.jsx 的樣板中。<br>然後在 App.jsx 引入 Cart.jsx</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// Cart.jsx</span><br><span class="hljs-keyword">import</span> propTypes <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;prop-types&quot;</span>;<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">Cart</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br><span class="hljs-keyword">return</span> (<br>  &lt;div className=&quot;&quot;&gt;<br>    &#123;/* 購物車 */&#125;<br>    &lt;h2 className=&quot;text-2xl font-bold text-primary&quot;&gt;購物列表&lt;/h2&gt;<br>    &lt;hr className=&quot;mt-2 mb-4&quot; /&gt;<br>    &#123;cart.length === 0 ? (<br>      &lt;div className=&quot;rounded-lg border-2 border-brown-light mt-4 p-4 text-center text-brown font-bold&quot;&gt;<br>        尚未選擇飲品～<br>      &lt;/div&gt;<br>    ) : (<br>      &lt;div className=&quot;rounded-lg border-2 border-brown-light mt-4 p-4&quot;&gt;<br>        &lt;table className=&quot;min-w-full leading-normal&quot;&gt;<br>          &lt;thead&gt;<br>            &lt;tr&gt;<br>              &lt;th className=&quot;p-3 text-left text-xs font-semibold text-brown-light&quot;&gt;<br>                飲品資訊<br>              &lt;/th&gt;<br>              &lt;th className=&quot;p-3 text-center text-xs font-semibold text-brown-light&quot;&gt;<br>                數量<br>              &lt;/th&gt;<br>              &lt;th className=&quot;p-3 text-center text-xs font-semibold text-brown-light&quot;&gt;<br>                單價<br>              &lt;/th&gt;<br>    // ... 以下略<br>);<br>&#125;;<br><br></code></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// App.jsx</span><br><span class="hljs-keyword">import</span> &#123; useState, useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Cart</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/components/Cart&quot;</span>;<br><span class="hljs-comment">// ... 略</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br><span class="hljs-comment">// ... 略</span><br><span class="hljs-keyword">return</span> (<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bg-[#F8F6F2] min-h-screen&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;container mx-auto px-3 py-8&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;grid grid-cols-1 gap-4 lg:grid-cols-2 lg:gap-8&quot;</span>&gt;</span></span><br><span class="language-xml">// 略 ...</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Cart</span> /&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">hr</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;mt-4 mb-6&quot;</span> /&gt;</span></span><br><span class="language-xml">// ...略</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>);<br>&#125;;<br></code></pre></td></tr></table></figure><p>在 Cart.jsx 定義好預計要傳過來的資料跟功能，如下圖所示，我們可以根據紅字（沒有定義）來知道預計要傳過來的資料跟功能。接著透過 Cart.propTypes 定義好要傳進來的資料型別、功能</p><p><img src="https://i.imgur.com/WCPjccp.png"></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// Cart.jsx</span><br><span class="hljs-keyword">import</span> propTypes <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;prop-types&quot;</span>;<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">Cart</span> = (<span class="hljs-params">&#123; cart, deleteCartItem, updateCart, total, note, setNote,</span><br><span class="hljs-params">createOder &#125;</span>) =&gt; &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span></span><br><span class="language-xml">      &#123;/* 購物車 */&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;text-2xl font-bold text-primary&quot;</span>&gt;</span>購物列表<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;mt-2 mb-4&quot;</span> /&gt;</span></span><br><span class="language-xml">    // ... 略</span><br><span class="language-xml">  )</span><br><span class="language-xml">&#125;</span><br><span class="language-xml"></span><br><span class="language-xml">Cart.propTypes = &#123;</span><br><span class="language-xml">  cart: propTypes.array.isRequired,</span><br><span class="language-xml">  deleteCartItem: propTypes.func.isRequired,</span><br><span class="language-xml">  updateCart: propTypes.func.isRequired,</span><br><span class="language-xml">  total: propTypes.number.isRequired,</span><br><span class="language-xml">  note: propTypes.string.isRequired,</span><br><span class="language-xml">  setNote: propTypes.func.isRequired,</span><br><span class="language-xml">  createOder: propTypes.func.isRequired,</span><br><span class="language-xml">&#125;;</span><br></code></pre></td></tr></table></figure><p>根據在 Cart.jsx 所需要的資料或功能，我們就可以從父層傳入相對應的資料跟功能。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// app.jsx</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Cart</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/components/Cart&quot;</span>;<br><span class="hljs-comment">// ...略</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br><span class="hljs-comment">// ... 略</span><br><span class="hljs-keyword">return</span> (<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bg-[#F8F6F2] min-h-screen&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;container mx-auto px-3 py-8&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;grid grid-cols-1 gap-4 lg:grid-cols-2 lg:gap-8&quot;</span>&gt;</span></span><br><span class="language-xml">// ... 略</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Cart</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">cart</span>=<span class="hljs-string">&#123;cart&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">deleteCartItem</span>=<span class="hljs-string">&#123;deleteCartItem&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">updateCart</span>=<span class="hljs-string">&#123;updateCart&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">total</span>=<span class="hljs-string">&#123;total&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">note</span>=<span class="hljs-string">&#123;note&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">setNote</span>=<span class="hljs-string">&#123;setNote&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">createOder</span>=<span class="hljs-string">&#123;createOder&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">/&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">hr</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;mt-4 mb-6&quot;</span> /&gt;</span></span><br><span class="language-xml">// ... 略</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>);<br>&#125;;<br></code></pre></td></tr></table></figure><hr><h2 id="結尾"><a href="#結尾" class="headerlink" title="結尾"></a>結尾</h2><p>現在在寫 React 時，都特別能感受自己原生 JS 的不足，雖然能寫出程式，不過有時都會覺得卡卡的。先前寫 Vue 並不會這樣覺得，可能是因為 Vue 幫我們做了很多事（黑魔法）。</p><p>在寫這週紀錄的結尾時，就在想第三週跟第四週可能會換種方式紀錄，雖然這樣的步驟拆解，可以讓我刻意練習思路；主要是考量到自己的其他規劃，不過目前倒還不曉得要改用什麼方式，也許下週就會有靈感了（？）。</p><p>（若有什麼部分寫錯，也再麻煩跟我說，感恩！）</p>]]></content>
    
    
    <categories>
      
      <category>前端</category>
      
    </categories>
    
    
    <tags>
      
      <tag>六角學院</tag>
      
      <tag>React</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pinia 筆記</title>
    <link href="/post/learn-pinia.html"/>
    <url>/post/learn-pinia.html</url>
    
    <content type="html"><![CDATA[<h2 id="Pinia"><a href="#Pinia" class="headerlink" title="Pinia"></a>Pinia</h2><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>一段時間沒接觸前端領域，能很明顯感受到前端的變化如此之快。以 Vue 來說，透過官網提供的安裝 <code>npm init vue@latest</code>，也已經預設 vite 環境，以及把原先的 Vuex 改為 Pinia。</p><p>目前正在複習 Vue ，這邊也把 Pinia 做個筆記，關於 Pinia 的特點：</p><ul><li>跟 Vuex 很像，都是作為狀態管理的工作</li><li>沒有 Mutation （後來才知道有些開發者不喜歡這個步驟）</li><li>簡潔定義</li><li>可以寫 Option api ，也能寫 Composition api</li><li>支援 Typescript</li><li><del>可愛的官方吉祥物</del></li></ul><hr><h2 id="筆記"><a href="#筆記" class="headerlink" title="筆記"></a>筆記</h2><h3 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h3><p>先以 store&#x2F;counter.js 作為範例，我們需要先從 pinia 引入 defineStore 這個功能。</p><p>如下範例，上方是用 composition api 的寫法，而下方是原本的 option 寫法 (Vuex 是這樣寫的)，兩種方式的選擇可依照自己所偏好的。在下方的範例中，將會以 composition api 的方式作筆記。</p><p>對照：</p><table><thead><tr><th>Option</th><th>Composition</th></tr></thead><tbody><tr><td>state</td><td>ref</td></tr><tr><td>getters</td><td>computed</td></tr><tr><td>action</td><td>function</td></tr></tbody></table><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; ref, computed &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; defineStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;pinia&quot;</span>;<br><br><span class="hljs-comment">// composition</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCounterStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">&quot;counter&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br><span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);<br><span class="hljs-keyword">const</span> doubleCount = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> count.<span class="hljs-property">value</span> * <span class="hljs-number">2</span>);<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">increment</span>(<span class="hljs-params"></span>) &#123;<br>count.<span class="hljs-property">value</span>++;<br>&#125;<br><span class="hljs-keyword">return</span> &#123; count, doubleCount, increment &#125;;<br>&#125;);<br><br><span class="hljs-comment">// option</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCounterStore = <span class="hljs-title function_">defineStore</span>(&#123;<br><span class="hljs-attr">id</span>: <span class="hljs-string">&quot;counter&quot;</span>,<br><span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> (&#123;<br><span class="hljs-attr">counter</span>: <span class="hljs-number">0</span>,<br>&#125;),<br><span class="hljs-attr">getters</span>: &#123;<br><span class="hljs-attr">doubleCount</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> state.<span class="hljs-property">counter</span> * <span class="hljs-number">2</span>,<br>&#125;,<br><span class="hljs-attr">action</span>: &#123;<br><span class="hljs-title function_">addCount</span>(<span class="hljs-params"></span>) &#123;<br><span class="hljs-variable language_">this</span>.<span class="hljs-property">counter</span>++;<br>&#125;,<br>&#125;,<br>&#125;);<br></code></pre></td></tr></table></figure><p>在元件的引用中，先透過路徑 import useCounterStore 這個功能，然後再放到 store 這個變數。這邊因為使用了 script setup 這個語法糖，所以不用使用 return 就可在樣板中使用。</p><p>（這支範例程式是 .vue 檔案，不過因為程式碼無法產生高亮反應，所以以 html 作為替代）</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;</span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; useCounterStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/stores/counter.js&quot;</span>;</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> store = <span class="hljs-title function_">useCounterStore</span>();</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">triggerStoreIncrement</span> = (<span class="hljs-params"></span>) =&gt; &#123;</span><br><span class="language-javascript">store.<span class="hljs-title function_">increment</span>();</span><br><span class="language-javascript">&#125;;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Pinia<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>pinia資料：&#123;&#123; store.count &#125;&#125;<br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;triggerStoreIncrement&quot;</span>&gt;</span><br>觸發 pinia increment<br><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="api-的處理"><a href="#api-的處理" class="headerlink" title="api 的處理"></a>api 的處理</h3><p>先前用 vuex 時，如果要打個 api，步驟是：</p><ol><li>元件做 dispatch</li><li>在 action 打 api，並且 commit</li><li>透過 commit 去觸發 mutation，然後改資料 (state)</li></ol><p>不過現在 pinia + composition api，變得比較簡潔（自由？），如下方程式碼所示：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// products.js</span><br><span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;<br><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;axios&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; defineStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;pinia&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useProductsStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">&quot;product&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br><span class="hljs-keyword">const</span> products = <span class="hljs-title function_">ref</span>([]);<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchApi</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;<br><span class="hljs-keyword">try</span> &#123;<br><span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;https://fakestoreapi.com/products&quot;</span>);<br>products.<span class="hljs-property">value</span> = res.<span class="hljs-property">data</span>;<br>&#125; <span class="hljs-keyword">catch</span> (error) &#123;<br><span class="hljs-comment">// error</span><br>&#125;<br>&#125;;<br><span class="hljs-keyword">return</span> &#123; products, fetchApi &#125;;<br>&#125;);<br></code></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- products.vue --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; useProductsStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/stores/products.js&quot;</span>;</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> store = <span class="hljs-title function_">useProductsStore</span>();</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">triggerStoreFetchApi</span> = (<span class="hljs-params"></span>) =&gt; &#123;</span><br><span class="language-javascript">store.<span class="hljs-title function_">fetchApi</span>();</span><br><span class="language-javascript">&#125;;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>產品頁<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;&#123; store.products &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;triggerStoreFetchApi&quot;</span>&gt;</span>Get API<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="關於解構的可能問題"><a href="#關於解構的可能問題" class="headerlink" title="關於解構的可能問題"></a>關於解構的可能問題</h3><p>當我們從元件去接 pinia 資料或方法時，可以透過解構達到更乾淨的 template，讓我們不用在 template 寫 <code>store.xxxxxxx</code>；不過如果是跟 ref 相關的資料 (ref、computed) ，解構會造成資料失去響應式，這時就可以用 pinia 提供的 <code>storeToRefs()</code>，來達成解構 ref 資料但不失去響應式。</p><p>解構方面的問題，主要是對於 ref 相關資料；如果是 reactive 或函式就可以直接解構使用。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;</span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; useCounterStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/stores/counter.js&quot;</span>;</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> store = <span class="hljs-title function_">useCounterStore</span>();</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> &#123; count &#125; = <span class="hljs-title function_">storeToRefs</span>(store);</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> &#123; increment &#125; = store; <span class="hljs-comment">// 函式直接解構使用</span></span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Pinia<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>pinia資料：&#123;&#123; count &#125;&#125;<br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;increment&quot;</span>&gt;</span>觸發 increment<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br></code></pre></td></tr></table></figure><hr>]]></content>
    
    
    <categories>
      
      <category>前端</category>
      
    </categories>
    
    
    <tags>
      
      <tag>pinia</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>六角學院 React 入門工作坊第一週</title>
    <link href="/post/react-workshop-week1.html"/>
    <url>/post/react-workshop-week1.html</url>
    
    <content type="html"><![CDATA[<p>Photo by <a href="https://unsplash.com/@lautaroandreani?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Lautaro Andreani</a> on <a href="https://unsplash.com/photos/xkBaqlcqeb4?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Unsplash</a></p><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>因為身體關係，所以暫離了前端領域一段時間；而近期隨著身體已經趨於穩定（恢復中），所以想再度接回前端的軌道，目前保持進修中，也參加了六角開的 React 入門工作坊，增加與前端的連結。</p><p>先前寫過 Vue 一段時間，所以在學習 React 時，能比較知道這兩者的一些比對，React 寫法的確比較自由，但很吃原生 JS 的功力（這方面偏弱 QQ)，<strong>而這篇文章主要是想把第一週作業的過程，做點紀錄跟刻意練習寫程式的思路</strong>。</p><p><a href="https://codepen.io/yaj55ushydna/pen/dyQEjaP?editors=0110">作業放置處</a></p><p>大致的流程為：</p><ol><li>定義資料並渲染</li><li>調整庫存數量</li><li>庫存數量優化</li><li>編輯品項名稱</li></ol><hr><h2 id="定義資料並渲染"><a href="#定義資料並渲染" class="headerlink" title="定義資料並渲染"></a>定義資料並渲染</h2><p>不論使用哪個前端框架，我們都不是用 Dom 的角度做切入；而是採用<strong>資料驅動畫面</strong>的概念，所以定義資料、操作資料都是很常見的。</p><p>使用 JSX 語法上，需要習慣一段時間。分享我自己的小撇步：<strong>在 JSX 語法中，如果要開始寫 JS 就用 {}；而準備要寫 HTML 就用 ()。</strong>（註：這是一個記憶撇步，實際上 JSX 內的概念就都是 JS）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> &#123; useState &#125; = <span class="hljs-title class_">React</span>;<br><br><span class="hljs-keyword">const</span> drinkMenu = [<br><span class="hljs-comment">// 略...</span><br>];<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">MenuManage</span>(<span class="hljs-params"></span>) &#123;<br><span class="hljs-keyword">const</span> [menu, setMenu] = <span class="hljs-title function_">useState</span>(drinkMenu); <span class="hljs-comment">// Hooks</span><br><br><span class="hljs-keyword">return</span> (<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>餐點管理工具<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span></span><br><span class="language-xml">// ...略</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span></span><br><span class="language-xml">&#123;menu.map((item) =&gt; &#123;</span><br><span class="language-xml">return (</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;item.id&#125;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>&#123;item.name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">small</span>&gt;</span>&#123;item.content&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">small</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>&#123;item.price&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>&#123;item.qty&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span></span><br><span class="language-xml">);</span><br><span class="language-xml">&#125;)&#125;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>);<br>&#125;<br><br><span class="hljs-keyword">const</span> root = <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">createRoot</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;root&quot;</span>));<br>root.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">MenuManage</span> /&gt;</span></span>);<br></code></pre></td></tr></table></figure><h2 id="調整庫存數量"><a href="#調整庫存數量" class="headerlink" title="調整庫存數量"></a>調整庫存數量</h2><p>(考量到程式碼的長度，所以有些部分會做個省略)</p><p>再來我們要調整庫存數量，所以做了兩個按鈕來對應增減的功能，而像是 <code>() =&gt; handleQtyAdd(item.id) </code> 所傳入的 <code>item.id</code> 則為識別用，判斷我們要改的是資料中的哪一個。</p><p>至於在庫存增加跟減少的功能中，我們得產出一組新的 array，然後再做 setState （下方範例是 setMenu），是因為 <strong>React state immutable</strong> 的設計概念。簡單來說就是寫 React 遇到要更新物件或陣列時，要根據更新需求去產新的物件或陣列。（有興趣的話可以 Google，或者參考這篇<a href="https://ithelp.ithome.com.tw/articles/10301603">文章</a>)。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 前略...</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">MenuManage</span>(<span class="hljs-params"></span>) &#123;<br><span class="hljs-comment">// Hooks 資料定義</span><br><span class="hljs-keyword">const</span> [menu, setMenu] = <span class="hljs-title function_">useState</span>(drinkMenu);<br><br><span class="hljs-comment">// 庫存增加</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">handleQtyAdd</span> = (<span class="hljs-params">id</span>) =&gt; &#123;<br><span class="hljs-comment">// id 為傳過來的參數，用於判斷現在點到是第幾個</span><br><span class="hljs-keyword">const</span> menuTemp = menu.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> &#123;<br><span class="hljs-keyword">return</span> item.<span class="hljs-property">id</span> === id ? &#123; ...item, <span class="hljs-attr">qty</span>: (item.<span class="hljs-property">qty</span> += <span class="hljs-number">1</span>) &#125; : item;<br>&#125;);<br><span class="hljs-title function_">setMenu</span>(menuTemp);<br>&#125;;<br><br><span class="hljs-comment">// 庫存減少</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">handleQtyMinus</span> = (<span class="hljs-params">id</span>) =&gt; &#123;<br><span class="hljs-keyword">const</span> menuTemp = menu.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> &#123;<br><span class="hljs-keyword">return</span> item.<span class="hljs-property">id</span> === id ? &#123; ...item, <span class="hljs-attr">qty</span>: (item.<span class="hljs-property">qty</span> -= <span class="hljs-number">1</span>) &#125; : item;<br>&#125;);<br><span class="hljs-title function_">setMenu</span>(menuTemp);<br>&#125;;<br><br><span class="hljs-keyword">return</span> (<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>餐點管理工具<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span></span><br><span class="language-xml">// 略...</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span></span><br><span class="language-xml">&#123;menu.map((item) =&gt; &#123;</span><br><span class="language-xml">return (</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;item.id&#125;</span>&gt;</span></span><br><span class="language-xml">// 略...</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> handleQtyMinus(item.id)&#125;&gt;</span><br><span class="language-xml">-</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">&#123;item.qty&#125;</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> handleQtyAdd(item.id)&#125;&gt;</span><br><span class="language-xml">+</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span></span><br><span class="language-xml">);</span><br><span class="language-xml">&#125;)&#125;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>);<br>&#125;<br><br><span class="hljs-keyword">const</span> root = <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">createRoot</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;root&quot;</span>));<br>root.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">MenuManage</span> /&gt;</span></span>);<br></code></pre></td></tr></table></figure><p>如果不太理解三元運算子，或寫起來很卡的話，也可以先用最簡易的 if else 來寫，然後再慢慢對照三元運算的概念。<br>以下取庫存增加的 function 來做範例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 庫存增加</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">handleQtyAdd</span> = (<span class="hljs-params">id</span>) =&gt; &#123;<br><span class="hljs-keyword">const</span> menuTemp = menu.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> &#123;<br><span class="hljs-keyword">if</span> (item.<span class="hljs-property">id</span> === id) &#123;<br><span class="hljs-keyword">return</span> &#123;<br>...item,<br><span class="hljs-attr">qty</span>: (item.<span class="hljs-property">qty</span> += <span class="hljs-number">1</span>),<br>&#125;;<br>&#125; <span class="hljs-keyword">else</span> &#123;<br><span class="hljs-keyword">return</span> item;<br>&#125;<br><br><span class="hljs-comment">// return item.id === id</span><br><span class="hljs-comment">//   ? &#123; ...item, qty: (item.qty += 1) &#125;</span><br><span class="hljs-comment">//   : item;</span><br>&#125;);<br><span class="hljs-title function_">setMenu</span>(menuTemp);<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="庫存數量優化"><a href="#庫存數量優化" class="headerlink" title="庫存數量優化"></a>庫存數量優化</h2><p>因為庫存數量增減的 function 只有差異在 <code>item.qty += 1</code> 跟 <code>item.qty -= 1</code>，所以把增減的兩個 function 縮減成一個，然後多傳入一個參數（type) 作為增減的判斷。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> &#123; useState &#125; = <span class="hljs-title class_">React</span>;<br><br><span class="hljs-keyword">const</span> drinkMenu = [<br><span class="hljs-comment">// 略 ...</span><br>];<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">MenuManage</span>(<span class="hljs-params"></span>) &#123;<br><span class="hljs-comment">// Hooks 資料定義</span><br><span class="hljs-keyword">const</span> [menu, setMenu] = <span class="hljs-title function_">useState</span>(drinkMenu);<br><br><span class="hljs-comment">// 庫存數量功能</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">handleQtyFn</span> = (<span class="hljs-params">id, type</span>) =&gt; &#123;<br><span class="hljs-keyword">const</span> menuTemp = menu.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> &#123;<br><span class="hljs-keyword">return</span> item.<span class="hljs-property">id</span> === id<br>? &#123; ...item, <span class="hljs-attr">qty</span>: type === <span class="hljs-string">&quot;add&quot;</span> ? (item.<span class="hljs-property">qty</span> += <span class="hljs-number">1</span>) : (item.<span class="hljs-property">qty</span> -= <span class="hljs-number">1</span>) &#125;<br>: item;<br>&#125;);<br><span class="hljs-title function_">setMenu</span>(menuTemp);<br>&#125;;<br><br><span class="hljs-keyword">return</span> (<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>餐點管理工具<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span></span><br><span class="language-xml">// 略 ...</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span></span><br><span class="language-xml">&#123;menu.map((item) =&gt; &#123;</span><br><span class="language-xml">return (</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;item.id&#125;</span>&gt;</span></span><br><span class="language-xml">// 略...</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> handleQtyFn(item.id, &quot;minus&quot;)&#125;</span><br><span class="language-xml">&gt;</span><br><span class="language-xml">-</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">&#123;item.qty&#125;</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> handleQtyFn(item.id, &quot;add&quot;)&#125;</span><br><span class="language-xml">&gt;</span><br><span class="language-xml">+</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span></span><br><span class="language-xml">);</span><br><span class="language-xml">&#125;)&#125;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>);<br>&#125;<br><br><span class="hljs-keyword">const</span> root = <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">createRoot</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;root&quot;</span>));<br>root.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">MenuManage</span> /&gt;</span></span>);<br></code></pre></td></tr></table></figure><h2 id="編輯品項名稱"><a href="#編輯品項名稱" class="headerlink" title="編輯品項名稱"></a>編輯品項名稱</h2><p>這個部分剛開始有卡關一陣，主要是定義 state 資料所產生的問題。在編輯品項中，剛開始的粗淺想法是增加一個 boolen state 來做判斷 （像是：<code>const [status, setStatus] = useState(true)</code>），不過這樣的方式無法去識別<strong>點編輯的項目是哪一個</strong>，例如對某個品項點擊編輯，會發現全部品項都可以編譯。</p><p>後來改用定義 id（<code>const [currentId, setCurrentId] = useState(&#39;&#39;)</code>）的方式為依據。流程大致是：<br>在初始狀態 <code>currentId</code> 為空值時，每個餐點項目都是顯示”品項名稱”跟”編輯按鈕”；假設第二個品項中的編輯按鈕被點擊時，就會透過 <code>handleCurrentId</code> 以及第二個品項的 <code>item.id</code> 參數去做 <code>setCurrentId</code>，此時在樣板的 <code>item.id === currentId</code> 判斷中，第二個品項就會顯示 “input” 跟”完成按鈕”。</p><p>(至於 input 的 onChange，邏輯上跟前面庫存的寫法一致，所以就不再贅述。)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> &#123; useState &#125; = <span class="hljs-title class_">React</span>;<br><br><span class="hljs-keyword">const</span> drinkMenu = [<br><span class="hljs-comment">// 略 ...</span><br>];<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">MenuManage</span>(<span class="hljs-params"></span>) &#123;<br><span class="hljs-comment">// Hooks 資料定義</span><br><span class="hljs-keyword">const</span> [menu, setMenu] = <span class="hljs-title function_">useState</span>(drinkMenu);<br><span class="hljs-keyword">const</span> [currentId, setCurrentId] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;&quot;</span>);<br><br><span class="hljs-comment">// 略...</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">handleCurrentId</span> = (<span class="hljs-params">id, type</span>) =&gt; &#123;<br>type === <span class="hljs-string">&quot;edit&quot;</span> ? <span class="hljs-title function_">setCurrentId</span>(id) : <span class="hljs-title function_">setCurrentId</span>(<span class="hljs-string">&quot;&quot;</span>);<br>&#125;;<br><br><span class="hljs-comment">// input</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">handleChangeInput</span> = (<span class="hljs-params">e, id</span>) =&gt; &#123;<br><span class="hljs-keyword">const</span> menuTemp = menu.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> &#123;<br><span class="hljs-keyword">return</span> item.<span class="hljs-property">id</span> === id ? &#123; ...item, <span class="hljs-attr">name</span>: e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span> &#125; : item;<br>&#125;);<br><span class="hljs-title function_">setMenu</span>(menuTemp);<br>&#125;;<br><br><span class="hljs-keyword">return</span> (<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>餐點管理工具<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span></span><br><span class="language-xml">// 略 ...</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span></span><br><span class="language-xml">&#123;menu.map((item) =&gt; &#123;</span><br><span class="language-xml">return (</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;item.id&#125;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span></span><br><span class="language-xml">&#123;item.id === currentId ? (</span><br><span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">value</span>=<span class="hljs-string">&#123;item.name&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;(e)</span> =&gt;</span> handleChangeInput(e, item.id)&#125;</span><br><span class="language-xml">/&gt;</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> handleCurrentId(item.id, &quot;complete&quot;)&#125;</span><br><span class="language-xml">&gt;</span><br><span class="language-xml">完成</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/&gt;</span></span><br><span class="language-xml">) : (</span><br><span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">&#123;item.name&#125;</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> handleCurrentId(item.id, &quot;edit&quot;)&#125;</span><br><span class="language-xml">&gt;</span><br><span class="language-xml">編輯</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/&gt;</span></span><br><span class="language-xml">)&#125;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span><br><span class="language-xml">// 略...</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span></span><br><span class="language-xml">);</span><br><span class="language-xml">&#125;)&#125;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span></span><br>&lt;/table&gt;<br>&lt;/div&gt;<br>);<br>&#125;<br><br><span class="hljs-keyword">const</span> root = <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">createRoot</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;root&quot;</span>));<br>root.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">MenuManage</span> /&gt;</span></span>);<br></code></pre></td></tr></table></figure><hr><h2 id="結尾"><a href="#結尾" class="headerlink" title="結尾"></a>結尾</h2><p>實際在寫 React 的時候，還是能感受到自己原生 JS 功力比較弱，所以這樣的刻意練習，應該也是會有幫助的。另外如果有什麼部分或概念寫錯，也再麻煩指導，感謝！</p>]]></content>
    
    
    <categories>
      
      <category>前端</category>
      
    </categories>
    
    
    <tags>
      
      <tag>六角學院</tag>
      
      <tag>React</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>刻骨銘心的 2022</title>
    <link href="/post/unforgettable-2022.html"/>
    <url>/post/unforgettable-2022.html</url>
    
    <content type="html"><![CDATA[<p>2022 也即將踏上尾聲，如果要我對 2022 下一些關鍵字的話，我會選擇「<strong>痛苦</strong>」、「<strong>爭執</strong>」、「<strong>覺察</strong>」、「<strong>掙扎</strong>」、「<strong>疑難雜症</strong>」等這五組字詞。</p><p>在去年年底時，因擔心影響到工作，所以本來沒有打Ｘ苗的打算，也決定先打一劑試試，而沒想到這一個決定會影響到至今，以我寫文的這個當下，快滿週年了（<del>週年慶先不要，拜託了</del>）。</p><p>打了Ｘ苗後在診所外休息，正當感覺到不太舒服時就昏了過去。醒來後在診所休息了一陣，因為昏倒時有撞到頭，所以也到鄰近的大醫院檢查，所幸檢查結果沒有大礙。不過這段經歷也是相當不舒服的，在檢查候診、醫生觀察的同時，我也不斷領受著畏寒的副作用。（還好打苗的時候，有請太太陪同）</p><p>爾後就開始了這趟身體不適之旅（<del>討厭的旅途</del>），一月中的某一天忽然覺得很不舒服，擔心會不會是心肌炎，不過去大醫院檢查心臟的結果是一切正常，我也忘不了那個醫生疑惑的表情，他應該是在想說：「為何這個年輕人只有微微發燒，卻無力到需要被用輪椅推著……。」</p><p>在一月底到三月底這段時間，是還能出門上班的，也還好二月假期比較多，算是很大的分擔與緩解，讓身體可以抓緊時間多休息。而這段期間的後期，身體也有持續再恢復著，生活、工作上也越來越接近健康狀態；不過好景不長，接近三月底之前的某一天，又開始覺得身體渾身不對勁，莫名的不舒服感又再度來襲，整體狀況也掉得很快，我知道我的狀態應該暫時回不來了，也正式無法工作了。</p><p>三月底無法工作，而四月底左右時，衡量了彼此的整體狀況，跟太太提議暫時回彼此的家裡（分居），大概一到兩週時再聚個一次。</p><p>當時的症狀有：</p><ul><li>心悸</li><li>胃脹氣</li><li>疲倦無力</li><li>莫名不舒服</li><li>莫名不安（恐慌感）</li><li>害怕出門</li></ul><p>直到現在，有些症狀已經減輕或消失，有些還努力調養中。這麼多症狀，還涵蓋了身體與心理（恐慌、害怕出門），如果在西醫的角度上，就會被診斷為「<strong>自律神經失調</strong>」；而以中醫的角度，就會用「<strong>疑難雜症</strong>」來形容。（個人主觀偏好用後者，不過並沒有想戰什麼 XD）</p><hr><p>近期回顧這段時間的日記，發現自己從今年的前期到寫這文章的當下，一直都想知道為什麼？身體發生了什麼事？找答案的過程中，主要是以中醫作為調理，然後自己跳下來研究很多範疇：X 苗副作用、自然醫學、斷食、營養品、恐慌症、中醫等等。而最近幾個月就比較限縮在中醫知識了，一來是自己的偏好，二來是中醫本身的概念涵蓋較廣（全人、身心一體）；不過到目前都沒拼湊出什麼蛛絲馬跡，期望總有一天能知道些什麼。現在就先對自己說：「這就是人生苦澀體驗……」</p><p>這段過程除了研究外，也盡力調整作息與心情，嘗試了營養品（GABA、CBD、南非醉茄…），然後也到廟裡求神問事、收驚，以及人生第一次的催眠等等。有些故事也留待之後再來說了（<del>如果有想起來的話</del>）。</p><p>除了本身的病痛外，心理上的調整也讓我覺得很不容易，加上不能自主自在的出門，所以也少了很多的抒發管道。過去在心情煩悶時，還能去健身房舉舉重量，到操場跑一跑，出外逛街、找個地方喝咖啡……等等；不過現在都無法了，取而代之的是：自己面對自己的時間，在日常生活中（尤其夜深人靜時），更能觸碰到自己的想法與情緒，看著大腦不斷反芻著過去，然後焦慮的想像未來場景。而不論過去或未來，對於現在這個此刻來說都不是真實的；不過卻像我們在看電影一樣，很容易就被拉入劇情中，尤其是負面的劇情。</p><p>這段時間經歷了很多劇本，像是”自己和自己過意不去”、”和周遭進行價值觀的爭執（<del>簡單來說就是吵架</del>）”、以及”社會對我的評價（<del>簡單來說就是會被評價、攻擊</del>）”。而有些情景也歷歷在目，像是五月、六月晚上寫日記時，因為有著太多負面情緒，差點把日記本撕爛；或者在爭執後，拖著疲倦的身軀體會著低潮，想著：「到底是要我怎麼樣？我還能怎麼辦呢？」，以及低潮時腦海的喃喃自語：「這樣的痛苦何時會消失呢？如果沒去打那針就好了……」</p><p>雖然乘載了許多負面，但很幸運的在這過程中也遇到幾位貴人幫助，引導我去接觸正念冥想，指出我個性、習慣可以調整的部分，建議我可以去看什麼書籍，在這難熬的時間陪我聊天，給予我心理上的支持。讓我的心情從「<strong>死死卡快活</strong>」轉變到「<strong>即使難看的掙扎著，我也要做好現在能做的事情</strong>」。</p><p><strong>感謝家人、醫生們、好友、催眠師、收驚老師、公司老闆及同事、新認識的朋友，這些恩情我會記在心裡的。</strong></p><p>Photo by <a href="https://unsplash.com/@kellysikkema?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Kelly Sikkema</a> on <a href="https://unsplash.com/photos/UCnYf3lVnr8?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Unsplash</a></p>]]></content>
    
    
    <categories>
      
      <category>生活</category>
      
    </categories>
    
    
    <tags>
      
      <tag>生活</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
