{"title":"mongoDB 資料庫（資料表操作）","uid":"7a50ed205ba25f6b7085d462d38a3771","slug":"mongod-mongosh","date":"2024-03-10T12:51:16.000Z","updated":"2024-03-12T14:02:44.682Z","comments":true,"path":"api/articles/mongod-mongosh.json","keywords":null,"cover":"https://i.imgur.com/R9qXjKc.jpeg","content":"<div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\">TIP</p>\n<p>關於 <strong>mongoDB 資料庫與資料表操作</strong><br>用自己的口語再次筆記練習</p>\n</div>\n<h2 id=\"前置操作\"><a href=\"#前置操作\" class=\"headerlink\" title=\"前置操作\"></a>前置操作</h2><p>（需要先安裝 MongoDB、Mongo Shell、MongoDB Compass）</p>\n<h3 id=\"使用-mongod-開啟伺服器應用（資料庫）\"><a href=\"#使用-mongod-開啟伺服器應用（資料庫）\" class=\"headerlink\" title=\"使用 mongod 開啟伺服器應用（資料庫）\"></a>使用 mongod 開啟伺服器應用（資料庫）</h3><div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">mongod</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">--dbpath</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">`</span><span style=\"color: #FFCB6B\">db資料夾路徑</span><span style=\"color: #89DDFF\">`</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">--logpath</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">`</span><span style=\"color: #FFCB6B\">log資料夾路徑</span><span style=\"color: #89DDFF\">`</span></span></code></pre></div><h3 id=\"mongosh：造訪資料庫，並做一些應用（新增、刪除、修改…）\"><a href=\"#mongosh：造訪資料庫，並做一些應用（新增、刪除、修改…）\" class=\"headerlink\" title=\"mongosh：造訪資料庫，並做一些應用（新增、刪除、修改…）\"></a>mongosh：造訪資料庫，並做一些應用（新增、刪除、修改…）</h3><div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">mongosh</span></span></code></pre></div><p><img src=\"https://i.imgur.com/VZGNBQh.png\" alt=\"mongosh\"></p>\n<h3 id=\"show-dbs：呈現現有資料庫（一開始預設是三個）\"><a href=\"#show-dbs：呈現現有資料庫（一開始預設是三個）\" class=\"headerlink\" title=\"show dbs：呈現現有資料庫（一開始預設是三個）\"></a>show dbs：呈現現有資料庫（一開始預設是三個）</h3><div class=\"language-tsx\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">tsx</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">show dbs</span></span></code></pre></div><h3 id=\"use-來使用某個資料庫\"><a href=\"#use-來使用某個資料庫\" class=\"headerlink\" title=\"use 來使用某個資料庫\"></a>use 來使用某個資料庫</h3><p>如果沒有這個資料庫，則會直接幫我們新增，並移動到這個資料庫</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">use</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">`</span><span style=\"color: #FFCB6B\">資料庫名稱</span><span style=\"color: #89DDFF\">`</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">//</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">use</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">hotel</span></span></code></pre></div><hr>\n<h2 id=\"資料表操作單筆、多筆資料-document\"><a href=\"#資料表操作單筆、多筆資料-document\" class=\"headerlink\" title=\"資料表操作單筆、多筆資料(document)\"></a>資料表操作單筆、多筆資料(document)</h2><h3 id=\"insert-相關\"><a href=\"#insert-相關\" class=\"headerlink\" title=\"insert 相關\"></a>insert 相關</h3><p><strong>insertOne 新增單筆資料：</strong> 在 posts 這個資料表中，新增一筆資料(document)，這筆資料有七個欄位（如果一開始沒有 posts 這個資料表，則會在輸入指令時幫我們新增）</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">db.posts.insertOne(</span><span style=\"color: #BABED8\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #FFCB6B\">&quot;name&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #FFCB6B\">&quot;Billy&quot;</span><span style=\"color: #FFCB6B\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #FFCB6B\">&quot;image&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #FFCB6B\">&quot;https://dummyimage.com/248x100.png/dddddd/000000&quot;</span><span style=\"color: #FFCB6B\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #FFCB6B\">&quot;content&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #FFCB6B\">&quot;我是貼文內容，20240304新增&quot;</span><span style=\"color: #FFCB6B\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #FFCB6B\">&quot;likes&quot;</span><span style=\"color: #FFCB6B\">:50,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #FFCB6B\">&quot;comment&quot;</span><span style=\"color: #FFCB6B\">:30,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #FFCB6B\">&quot;type&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #FFCB6B\">&quot;group&quot;</span><span style=\"color: #FFCB6B\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #FFCB6B\">&quot;tags&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #BABED8\">[</span><span style=\"color: #FFCB6B\">&quot;心情&quot;</span><span style=\"color: #FFCB6B\">,</span><span style=\"color: #FFCB6B\">&quot;教育&quot;</span><span style=\"color: #FFCB6B\">],</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;)</span></span></code></pre></div><p><strong>insertMany 新增多筆資料：</strong>在 posts 這個資料表中，新增兩筆資料(document)，每筆資料有七個欄位</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">db.posts.insertMany([</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #FFCB6B\">&quot;name&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #FFCB6B\">&quot;Billy2&quot;</span><span style=\"color: #FFCB6B\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #FFCB6B\">&quot;image&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #FFCB6B\">&quot;https://dummyimage.com/248x100.png/dddddd/000000&quot;</span><span style=\"color: #FFCB6B\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #FFCB6B\">&quot;content&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #FFCB6B\">&quot;我是貼文內容222，20240304新增&quot;</span><span style=\"color: #FFCB6B\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #FFCB6B\">&quot;likes&quot;</span><span style=\"color: #FFCB6B\">:80,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #FFCB6B\">&quot;comment&quot;</span><span style=\"color: #FFCB6B\">:60,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #FFCB6B\">&quot;type&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #FFCB6B\">&quot;group&quot;</span><span style=\"color: #FFCB6B\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #FFCB6B\">&quot;tags&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #BABED8\">[</span><span style=\"color: #FFCB6B\">&quot;心情&quot;</span><span style=\"color: #FFCB6B\">,</span><span style=\"color: #FFCB6B\">&quot;教育&quot;</span><span style=\"color: #FFCB6B\">],</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #FFCB6B\">&quot;name&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #FFCB6B\">&quot;Billy3&quot;</span><span style=\"color: #FFCB6B\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #FFCB6B\">&quot;image&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #FFCB6B\">&quot;https://dummyimage.com/248x100.png/dddddd/000000&quot;</span><span style=\"color: #FFCB6B\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #FFCB6B\">&quot;content&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #FFCB6B\">&quot;我是貼文內容333，20240304新增&quot;</span><span style=\"color: #FFCB6B\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #FFCB6B\">&quot;likes&quot;</span><span style=\"color: #FFCB6B\">:500,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #FFCB6B\">&quot;comment&quot;</span><span style=\"color: #FFCB6B\">:300,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #FFCB6B\">&quot;type&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #FFCB6B\">&quot;group&quot;</span><span style=\"color: #FFCB6B\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #FFCB6B\">&quot;tags&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #BABED8\">[</span><span style=\"color: #FFCB6B\">&quot;心情&quot;</span><span style=\"color: #FFCB6B\">,</span><span style=\"color: #FFCB6B\">&quot;教育&quot;</span><span style=\"color: #FFCB6B\">],</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">])</span></span></code></pre></div><h3 id=\"Update-相關\"><a href=\"#Update-相關\" class=\"headerlink\" title=\"Update 相關\"></a>Update 相關</h3><p><strong>updateOne 修改單筆資料：</strong>在 posts 這個資料表中，根據條件篩選出的一筆資料(document)，進行欄位的調整。下方範例是將篩選出的資料(document)，將 content 欄位的值調整為”測試資料”</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">db.posts.updateOne(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #FFCB6B\">&quot;_id&quot;</span><span style=\"color: #FFCB6B\">:ObjectId(</span><span style=\"color: #FFCB6B\">&quot;xxxxxxxxx...&quot;</span><span style=\"color: #BABED8\">)</span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\">, // 條件篩選</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\">$set:&#123;</span><span style=\"color: #FFCB6B\">&quot;content&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #FFCB6B\">&quot;測試資料&quot;</span><span style=\"color: #FFCB6B\">&#125;&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">)</span></span></code></pre></div><p>篩選一筆特定資料(document)，將裡頭的 tags 陣列欄位，再新增一個新 tags </p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">db.posts.updateOne(</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #FFCB6B\">&quot;_id&quot;</span><span style=\"color: #FFCB6B\">:ObjectId(</span><span style=\"color: #FFCB6B\">&quot;65dcxxx...&quot;</span><span style=\"color: #BABED8\">)</span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">,</span><span style=\"color: #BABED8\">&#123;$push:&#123;tags:</span><span style=\"color: #FFCB6B\">&quot;遊記&quot;</span><span style=\"color: #FFCB6B\">&#125;&#125;</span><span style=\"color: #BABED8\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">//</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">驗證</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">//</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">db.posts.find</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">&#123; </span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">   </span><span style=\"color: #FFCB6B\">//</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">_id</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">:ObjectId</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #FFCB6B\">&quot;65dcxxx...&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">//</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">&#125;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span></code></pre></div><p><strong>updateMany 修改多筆資料：</strong>在 posts 這個資料表中，去篩選出多筆 name 欄位為”abc123”的資料(document)，並將這些資料的 content 欄位都調整成”測試”</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">db.posts.updateMany(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #FFCB6B\">&quot;name&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #FFCB6B\">&quot;abc123&quot;</span><span style=\"color: #FFCB6B\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\">$set:&#123;</span><span style=\"color: #FFCB6B\">&quot;content&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #FFCB6B\">&quot;測試&quot;</span><span style=\"color: #FFCB6B\">&#125;&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">)</span></span>\n<span class=\"line\"></span></code></pre></div><p>使用 updateMany 來移除欄位，下方範例是將 tags 陣列的”感情” tag 都移除</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">db.posts.updateMany(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">&quot;tags&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">感情</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> $pull: </span><span style=\"color: #C3E88D\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">tags</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">感情</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">)</span></span>\n<span class=\"line\"></span></code></pre></div><h3 id=\"delete-相關\"><a href=\"#delete-相關\" class=\"headerlink\" title=\"delete 相關\"></a>delete 相關</h3><p><strong>deleteOne 刪除單筆資料：</strong>在 posts 這個資料表中，去篩選 id 為 aaa123 的資料(document)，然後將之刪除</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">db.posts.deleteOne(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #FFCB6B\">&quot;_id&quot;</span><span style=\"color: #FFCB6B\">:ObjectId(</span><span style=\"color: #FFCB6B\">&quot;aaa123&quot;</span><span style=\"color: #BABED8\">)</span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">)</span></span>\n<span class=\"line\"></span></code></pre></div><p><strong>deleteMany 刪除多筆資料：</strong>將 type: group 這個條件中的多筆資料都刪除</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">db.posts.deleteMany(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #FFCB6B\">&quot;type&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #FFCB6B\">&quot;group&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">//</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">條件</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">)</span></span>\n<span class=\"line\"></span></code></pre></div><p>多個條件：將名字為 abc，以及 likes 數量 500(含) 以下都刪除</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">db.posts.deleteMany(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #FFCB6B\">&quot;name&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #FFCB6B\">&quot;abc&quot;</span><span style=\"color: #FFCB6B\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #FFCB6B\">&quot;likes&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #BABED8\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      $lte: </span><span style=\"color: #F78C6C\">500</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">//</span><span style=\"color: #BABED8\"> $lte </span><span style=\"color: #C3E88D\">表示小於等於</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">)</span></span>\n<span class=\"line\"></span></code></pre></div><p>不寫任何條件，等同於刪除全部資料</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">db.posts.deleteMany(</span><span style=\"color: #BABED8\">&#123;&#125;)</span></span></code></pre></div><h3 id=\"find-相關\"><a href=\"#find-相關\" class=\"headerlink\" title=\"find 相關\"></a>find 相關</h3><p>查詢全部 posts 的資料列表(document) </p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #82AAFF\">db.posts.find</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">db.posts.find</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #82AAFF\">.pretty</span><span style=\"color: #89DDFF\">()</span></span></code></pre></div><p>模糊搜尋：name 欄位含有 o 的資料列表</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">db.posts.find(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #FFCB6B\">&quot;name&quot;</span><span style=\"color: #FFCB6B\">:/o/&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">)</span></span>\n<span class=\"line\"></span></code></pre></div><p>單個條件：查詢 comments 有大於等於 500 以上的資料列表</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">db.posts.find(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #FFCB6B\">&quot;comments&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        $gte:500</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">)</span></span>\n<span class=\"line\"></span></code></pre></div><p>查詢 image 欄位為 null 的資料列表</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">db.posts.find(</span><span style=\"color: #BABED8\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #FFCB6B\">&quot;image&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">null</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;)</span></span>\n<span class=\"line\"></span></code></pre></div><p>多個條件：name 欄位為 abc123，按讚數大於等於 500、小於等於 1000</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">db.posts.find(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #FFCB6B\">&quot;name&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">abc123</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #FFCB6B\">&quot;likes&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        $gte:500, </span><span style=\"color: #C3E88D\">//</span><span style=\"color: #BABED8\"> $gte </span><span style=\"color: #C3E88D\">大於等於</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        $lte:1000 </span><span style=\"color: #C3E88D\">//</span><span style=\"color: #BABED8\"> $lte </span><span style=\"color: #C3E88D\">小於等於</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">)</span></span></code></pre></div><p>project 保護欄位：查詢 tags 欄位中，有包含到”幹話”的資料列表，然後將 _id 欄位設置隱藏（在有些狀況中，我們不可透露重要資訊在 user）</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">db.posts.find(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #FFCB6B\">&quot;tags&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      $in: [</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">幹話</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #BABED8\">] // $in 表示內容存在某個值</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #FFCB6B\">&quot;_id&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #C3E88D\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">//</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">將</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">id</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">欄位隱藏</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">)</span></span>\n<span class=\"line\"></span></code></pre></div><p>查詢 tags 欄位，有 謎因 或(or) 幹話 的資料列表</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">db.posts.find(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #FFCB6B\">&quot;tags&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      $in: [</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">謎因</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #BABED8\">,</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">幹話</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #BABED8\">]</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">)</span></span>\n<span class=\"line\"></span></code></pre></div><p>find 的 $and 與 $or：<br>在 posts 資料表中，找尋 likes 跟(and) comments 欄位都大於等於 1500 以上的資料列表（<a href=\"https://www.runoob.com/mongodb/mongodb-query.html\">參考連結</a>）</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">db.posts.find(</span><span style=\"color: #BABED8\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  $and: [</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">&quot;likes&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">&#123;</span><span style=\"color: #BABED8\"> $gte</span><span style=\"color: #C3E88D\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1500</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">&quot;comments&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">&#123;</span><span style=\"color: #BABED8\"> $gte</span><span style=\"color: #C3E88D\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1500</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  ]</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">//db.posts.find(</span><span style=\"color: #BABED8\">&#123; </span><span style=\"color: #C3E88D\">這個範例也可以這樣寫</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #FFCB6B\">//</span><span style=\"color: #FFCB6B\">&quot;likes&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">&#123;</span><span style=\"color: #BABED8\"> $gte</span><span style=\"color: #C3E88D\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1500</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #FFCB6B\">//</span><span style=\"color: #FFCB6B\">&quot;comments&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">&#123;</span><span style=\"color: #BABED8\"> $gte</span><span style=\"color: #C3E88D\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1500</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">//&#125;</span><span style=\"color: #BABED8\">)</span></span></code></pre></div><p>在 posts 資料表中，找尋 likes 或(or) comments 欄位中，大於等於 1000 以上的資料列表</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">db.posts.find(</span><span style=\"color: #BABED8\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  $or: [</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">&quot;likes&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">&#123;</span><span style=\"color: #BABED8\"> $gte</span><span style=\"color: #C3E88D\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1000</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">&quot;comments&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">&#123;</span><span style=\"color: #BABED8\"> $gte</span><span style=\"color: #C3E88D\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1000</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  ]</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\">)</span></span>\n<span class=\"line\"></span></code></pre></div><p>顯示 posts 資料表的資料筆數（數字）（<a href=\"https://www.mongodb.com/docs/manual/reference/method/db.collection.countDocuments/\">參考連結</a>）</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #82AAFF\">db.posts.countDocuments</span><span style=\"color: #89DDFF\">()</span></span></code></pre></div><p>查詢 name 欄位為 abc123 的資料列表，而這個排序從新到舊（<a href=\"https://www.runoob.com/mongodb/mongodb-sort.html\">參考連結</a>）</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">db.posts.find(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">&quot;name&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">abc123</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">//</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">查詢條件</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">).sort(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">&quot;createdAt&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">-1</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">//</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">根據</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">createdAt</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">欄位進行降序排序</span><span style=\"color: #BABED8\"> (由新到舊)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">)</span></span>\n<span class=\"line\"></span></code></pre></div><p>查詢 name 欄位為 abc123 的資料列表，只顯示前 30 筆資料（<a href=\"https://www.runoob.com/mongodb/mongodb-limit-skip.html\">參考連結</a>）</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">db.posts.find(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">&quot;name&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">abc123</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">//</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">查詢條件</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">).limit(30) // 限制返回結果為前 30 筆資料</span></span>\n<span class=\"line\"></span></code></pre></div><p>查詢 name 欄位為 abc123、likes 欄位大於等於 100 的資料列表。而這個資料列表只需顯示前 30 筆，並且對於這資料列表做新到舊的排序</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">db.posts.find(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">//</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">條件</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #FFCB6B\">&quot;name&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">abc123</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #FFCB6B\">&quot;likes&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        $gte:100,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">).limit(30).sort( &#123;&quot;createdAt&quot;: -1&#125; ); // 筆數與排序</span></span>\n<span class=\"line\"></span></code></pre></div><p>查詢 comments 超過 100 的資料列表，取得時先跳過前 30 筆資料，再顯示 30 筆資料</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">db.posts.find(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #FFCB6B\">&quot;comments&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        $gt: </span><span style=\"color: #F78C6C\">100</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">).skip(30).limit(30); // 要 30 筆，但先跳過 30 筆</span></span></code></pre></div><h3 id=\"replace-相關\"><a href=\"#replace-相關\" class=\"headerlink\" title=\"replace 相關\"></a>replace 相關</h3><p>替換 <strong>replaceOne、replaceMany：</strong>如下範例，透過 id 篩選了一筆要 replace 的資料，這邊會將 name 欄位修改成 yes~。<br>假設這筆資料還有其它欄位的話，在 replace 更新未寫到時，則會視為欄位的刪除，也就是這筆資料會只剩下 id 跟 name 欄位。（replace 這樣的用法也有刪除的功能）</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">db.posts.replaceOne(</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #FFCB6B\">&quot;_id&quot;</span><span style=\"color: #FFCB6B\">:ObjectId(</span><span style=\"color: #FFCB6B\">&quot;abcxxx&quot;</span><span style=\"color: #BABED8\">)</span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\">,</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #FFCB6B\">name:</span><span style=\"color: #FFCB6B\">&quot;yes~&quot;</span><span style=\"color: #FFCB6B\">&#125;</span><span style=\"color: #BABED8\">)</span></span></code></pre></div><p><strong>Comparison Query Operators 表格</strong></p>\n<table>\n<thead>\n<tr>\n<th>$eq</th>\n<th>等於</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>$ne</td>\n<td>不等於</td>\n</tr>\n<tr>\n<td>$gt</td>\n<td>大於</td>\n</tr>\n<tr>\n<td>$lt</td>\n<td>小於</td>\n</tr>\n<tr>\n<td>$gte</td>\n<td>大於等於</td>\n</tr>\n<tr>\n<td>$lte</td>\n<td>小於等於</td>\n</tr>\n<tr>\n<td>$in</td>\n<td>存在某個值</td>\n</tr>\n<tr>\n<td>$nin</td>\n<td>不存在某個值</td>\n</tr>\n</tbody></table>\n","text":" TIP 關於 mongoDB 資料庫與資料表操作用自己的口語再次筆記練習 前置操作（需要先安裝 MongoDB、Mongo Shell、MongoDB Com...","permalink":"/post/mongod-mongosh","photos":[],"count_time":{"symbolsCount":"6.1k","symbolsTime":"6 mins."},"categories":[{"name":"前端","slug":"前端","count":8,"path":"api/categories/前端.json"}],"tags":[{"name":"MongoDB","slug":"MongoDB","count":1,"path":"api/tags/MongoDB.json"},{"name":"Mongo Shell","slug":"Mongo-Shell","count":1,"path":"api/tags/Mongo-Shell.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%89%8D%E7%BD%AE%E6%93%8D%E4%BD%9C\"><span class=\"toc-text\">前置操作</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BD%BF%E7%94%A8-mongod-%E9%96%8B%E5%95%9F%E4%BC%BA%E6%9C%8D%E5%99%A8%E6%87%89%E7%94%A8%EF%BC%88%E8%B3%87%E6%96%99%E5%BA%AB%EF%BC%89\"><span class=\"toc-text\">使用 mongod 開啟伺服器應用（資料庫）</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#mongosh%EF%BC%9A%E9%80%A0%E8%A8%AA%E8%B3%87%E6%96%99%E5%BA%AB%EF%BC%8C%E4%B8%A6%E5%81%9A%E4%B8%80%E4%BA%9B%E6%87%89%E7%94%A8%EF%BC%88%E6%96%B0%E5%A2%9E%E3%80%81%E5%88%AA%E9%99%A4%E3%80%81%E4%BF%AE%E6%94%B9%E2%80%A6%EF%BC%89\"><span class=\"toc-text\">mongosh：造訪資料庫，並做一些應用（新增、刪除、修改…）</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#show-dbs%EF%BC%9A%E5%91%88%E7%8F%BE%E7%8F%BE%E6%9C%89%E8%B3%87%E6%96%99%E5%BA%AB%EF%BC%88%E4%B8%80%E9%96%8B%E5%A7%8B%E9%A0%90%E8%A8%AD%E6%98%AF%E4%B8%89%E5%80%8B%EF%BC%89\"><span class=\"toc-text\">show dbs：呈現現有資料庫（一開始預設是三個）</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#use-%E4%BE%86%E4%BD%BF%E7%94%A8%E6%9F%90%E5%80%8B%E8%B3%87%E6%96%99%E5%BA%AB\"><span class=\"toc-text\">use 來使用某個資料庫</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%B3%87%E6%96%99%E8%A1%A8%E6%93%8D%E4%BD%9C%E5%96%AE%E7%AD%86%E3%80%81%E5%A4%9A%E7%AD%86%E8%B3%87%E6%96%99-document\"><span class=\"toc-text\">資料表操作單筆、多筆資料(document)</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#insert-%E7%9B%B8%E9%97%9C\"><span class=\"toc-text\">insert 相關</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Update-%E7%9B%B8%E9%97%9C\"><span class=\"toc-text\">Update 相關</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#delete-%E7%9B%B8%E9%97%9C\"><span class=\"toc-text\">delete 相關</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#find-%E7%9B%B8%E9%97%9C\"><span class=\"toc-text\">find 相關</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#replace-%E7%9B%B8%E9%97%9C\"><span class=\"toc-text\">replace 相關</span></a></li></ol></li></ol>","author":{"name":"比利的人生實驗所","slug":"blog-author","avatar":"https://i.imgur.com/6uC6FLI.png","link":"/","description":"留不下、帶不走什麼的人生，<br/>練習專注在當下","socials":{"github":"https://github.com/yaj55billy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"內在工程 香巴維大手印 完課記錄","uid":"5f979e437eb1893f7adf9863dbf8c3c6","slug":"shambhavi-mahamudra","date":"2024-03-18T16:00:00.000Z","updated":"2024-03-21T13:00:42.276Z","comments":true,"path":"api/articles/shambhavi-mahamudra.json","keywords":null,"cover":"https://i.imgur.com/aJMjmF8.jpeg","text":"動機在去年的秋冬，為了想讓身體狀況再更進一步，所以做了不少嘗試，像是參加食療課積極調整三餐、自然醫學相關諮詢、真吾調理等，在身心的作用上確實得到好的回饋。 到了...","permalink":"/post/shambhavi-mahamudra","photos":[],"count_time":{"symbolsCount":"1.4k","symbolsTime":"1 mins."},"categories":[{"name":"生活","slug":"生活","count":6,"path":"api/categories/生活.json"}],"tags":[{"name":"生活","slug":"生活","count":6,"path":"api/tags/生活.json"},{"name":"內在工程","slug":"內在工程","count":1,"path":"api/tags/內在工程.json"}],"author":{"name":"比利的人生實驗所","slug":"blog-author","avatar":"https://i.imgur.com/6uC6FLI.png","link":"/","description":"留不下、帶不走什麼的人生，<br/>練習專注在當下","socials":{"github":"https://github.com/yaj55billy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"即將到來的 2024 隨筆","uid":"6e627d94fd2e3ea51fe1d3e3b1903242","slug":"coming-2024","date":"2023-12-30T00:00:00.000Z","updated":"2024-03-10T03:48:16.503Z","comments":true,"path":"api/articles/coming-2024.json","keywords":null,"cover":"https://i.imgur.com/T7Y0uxN.jpeg","text":" 圖片是用 AI 產出的，當我用 2023 to 2024 這個關鍵字時，它產了一張貓咪圖給我，某方面來說真的有點專業？然後就很乾脆（隨便）加上 2024 的文...","permalink":"/post/coming-2024","photos":[],"count_time":{"symbolsCount":"1.7k","symbolsTime":"2 mins."},"categories":[{"name":"生活","slug":"生活","count":6,"path":"api/categories/生活.json"}],"tags":[{"name":"生活","slug":"生活","count":6,"path":"api/tags/生活.json"},{"name":"隨筆","slug":"隨筆","count":2,"path":"api/tags/隨筆.json"}],"author":{"name":"比利的人生實驗所","slug":"blog-author","avatar":"https://i.imgur.com/6uC6FLI.png","link":"/","description":"留不下、帶不走什麼的人生，<br/>練習專注在當下","socials":{"github":"https://github.com/yaj55billy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}